{
	"info": {
		"_postman_id": "ab5d5214-1d8a-48df-9926-e5b986118da6",
		"name": "AMA - Company",
		"description": "Postman Tests for Access Management API\n\n1.  Variables naming convention:\n    \n\n\\- environment variables: **ENV_VAR** (capital letters separated by underscore) - should not change value when tests are run\n\n\\- collection variables: **collectionVariable** (lower camel case. Every word except the first word starts with capital letter) - change value when tests are run\n\n2\\. Release version naming convention:\n\ne.g. AccessManagement v1.35.0?- the release will take the name of the project (AccessManagement) + the production release version - [https://github.com/Visma-net-Platform/access-management-api/releases/tag/v1.35.0](https://github.com/Visma-net-Platform/access-management-api/releases/tag/v1.35.0)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "10689816"
	},
	"item": [
		{
			"name": "Access token for user [2]",
			"item": [
				{
					"name": "Access Token for User [Mock with AWS]",
					"item": [
						{
							"name": "Use Mock with AWS?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    console.log(\"Mock with AWS is used in environment \" + pm.environment.name);",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/",
											"    postman.setNextRequest(\"Access Token for User [2] - Authorize\");",
											"} else {",
											"    postman.setNextRequest(\"Access Token for User [2] - Use Visma Connect?\");",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [2] - Authorize",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const cookieJar = pm.cookies.jar();\r",
											"\r",
											"cookieJar.clear(pm.environment.get(\"VISMA_CONNECT_URL\") + pm.environment.get(\"AUTHORIZE_PATH\"), function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, \r",
											"    // click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    if (error) {\r",
											"        console.log(error);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Only used with the Visma Connect mock done with AWS Cognito.\r",
											"const cookieJar = pm.cookies.jar();\r",
											"const xsrfToken = cookieJar.get(pm.environment.get(\"VISMA_CONNECT_URL\") \r",
											"    + pm.environment.get(\"LOGIN_URL\"), 'XSRF-TOKEN', function(error, cookie) {\r",
											"        if (error) {\r",
											"            console.log(error);\r",
											"        } else {\r",
											"            pm.collectionVariables.set('xsrfToken', cookie);\r",
											"        }\r",
											"});\r",
											"pm.collectionVariables.set('xsrfToken', xsrfToken);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});",
											"pm.test(\"Has Location header with authorization code\", function(){",
											"    pm.response.to.have.header(\"Location\");",
											"    var location = pm.response.headers.get(\"Location\");",
											"    pm.expect(location.startsWith(pm.environment.get(\"REDIRECT_URI\") + \"?code=\")).is.true;",
											"    pm.collectionVariables.set(\"authorizationCode\", location.substring(location.indexOf(\"?code=\") + \"?code=\".length));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "_csrf",
											"value": "{{xsrfToken}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&redirect_uri={{REDIRECT_URI}}&scope={{ADMIN_CUSTOMER_UI_SCOPES}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForUser\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForUser\", json.id_token);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCode}}",
											"type": "text"
										},
										{
											"key": "tenant_hint",
											"value": "{{CUSTOMER_TENANT_ID}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Access Token for User [Visma Connect]",
					"item": [
						{
							"name": "Access Token for User [2] - Use Visma Connect?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/    ",
											"    postman.setNextRequest(\"Access Token for User [2] - End Access Token for User\");",
											"} else {",
											"    console.log(\"Visma Connect is used in environment \" + pm.environment.name);",
											"    postman.setNextRequest(\"Access Token for User [2] - Get login screen\");",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [2] - Get login screen",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const jar = pm.cookies.jar();\r",
											"\r",
											"var cookieUrl = \".\" + pm.environment.get(\"VISMA_CONNECT_URL\").replace(\"https://\", \"\");\r",
											"\r",
											"jar.clear(cookieUrl, function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    console.log(error);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// get request verification token value\r",
											"var html = cheerio(responseBody);\r",
											"pm.collectionVariables.set(\"requestVerificationToken\", html.find('input[name=__RequestVerificationToken]').attr('value'));"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_URL}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post&tenant_hint={{CUSTOMER_TENANT_ID}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_URL}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										},
										{
											"key": "tenant_hint",
											"value": "{{CUSTOMER_TENANT_ID}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationToken}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user password",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationToken}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}/password",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									],
									"path": [
										"password"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get authorize request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var html = cheerio(responseBody);",
											"",
											"// asserts",
											"pm.test(\"Response status code is redirect\", function () {",
											"    pm.response.to.have.status(302);",
											"});",
											"",
											"// In case the Location header starts with \"/recovery\", it means that Visma Connect is asking the user to",
											"// add account recovery options.",
											"// You need to log in with the user account, from a web browser, and to dismiss the Recovery popup.",
											"// We are logging the Location header to leave an indication if this scenario appeared.",
											"// We believe it happens every 3 months.",
											"console.log(pm.response.headers.get('Location'));",
											"",
											"// get authorization code value",
											"parser = require('postman-collection').Url.parse",
											"pm.collectionVariables.set(\"authorizationCode\", parser(pm.response.headers.get('Location')).query.find(a => a.key === \"code\")[\"value\"]);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var codeVerifier = getVerifier();\r",
											"\r",
											"console.log(\"Code verifier :\" + codeVerifier);\r",
											"console.log(\"Code challange :\" + getCodeChallange(codeVerifier));\r",
											"\r",
											"pm.collectionVariables.set(\"codeVerifier\", codeVerifier );\r",
											"pm.collectionVariables.set(\"codeChallange\", getCodeChallange(codeVerifier));\r",
											"\r",
											"\r",
											" function getVerifier(){\r",
											"    const value = CryptoJS.lib.WordArray.random(32);\r",
											"    return getBase64URLEncode(value);\r",
											" }\r",
											"\r",
											" function getCodeChallange(value){\r",
											"   return getBase64URLEncode(CryptoJS.SHA256(value));\r",
											" }\r",
											"\r",
											" function getBase64URLEncode(value){\r",
											"    return CryptoJS.enc.Base64.stringify(value)\r",
											"      .replace(/\\+/g, '-')\r",
											"      .replace(/\\//g, '_')\r",
											"      .replace(/=/g, '');\r",
											"  }"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?redirect_uri={{REDIRECT_URI}}&client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=teststate&code_challenge={{codeChallange}}&code_challenge_method=S256&response_mode=query&tenant_hint={{CUSTOMER_TENANT_ID}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "teststate"
										},
										{
											"key": "code_challenge",
											"value": "{{codeChallange}}"
										},
										{
											"key": "code_challenge_method",
											"value": "S256"
										},
										{
											"key": "response_mode",
											"value": "query"
										},
										{
											"key": "tenant_hint",
											"value": "{{CUSTOMER_TENANT_ID}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post token request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForUser\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForUser\", json.id_token);",
											"",
											"const jar = pm.cookies.jar();",
											"jar.clear(pm.request.url, function (error) {",
											"    console.log(error);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCode}}",
											"type": "text"
										},
										{
											"key": "code_verifier",
											"value": "{{codeVerifier}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Access Token for User [2] - End Access Token for User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/actuator/health",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"actuator",
								"health"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Access token for user for AO [3]",
			"item": [
				{
					"name": "Access Token for User [Mock with AWS]",
					"item": [
						{
							"name": "Use Mock with AWS?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    console.log(\"Mock with AWS is used in environment \" + pm.environment.name);",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/",
											"    postman.setNextRequest(\"Access Token for User [3] - Authorize\");",
											"} else {",
											"    postman.setNextRequest(\"Access Token for User [3] - Use Visma Connect?\");",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [3] - Authorize",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const cookieJar = pm.cookies.jar();\r",
											"\r",
											"cookieJar.clear(pm.environment.get(\"VISMA_CONNECT_URL\") + pm.environment.get(\"AUTHORIZE_PATH\"), function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, \r",
											"    // click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    if (error) {\r",
											"        console.log(error);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Only used with the Visma Connect mock done with AWS Cognito.\r",
											"const cookieJar = pm.cookies.jar();\r",
											"const xsrfToken = cookieJar.get(pm.environment.get(\"VISMA_CONNECT_URL\") \r",
											"    + pm.environment.get(\"LOGIN_URL\"), 'XSRF-TOKEN', function(error, cookie) {\r",
											"        if (error) {\r",
											"            console.log(error);\r",
											"        } else {\r",
											"            pm.collectionVariables.set('xsrfTokenAOCustomer', cookie);\r",
											"        }\r",
											"});\r",
											"pm.collectionVariables.set('xsrfTokenAOCustomer', xsrfToken);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});",
											"pm.test(\"Has Location header with authorization code\", function(){",
											"    pm.response.to.have.header(\"Location\");",
											"    var location = pm.response.headers.get(\"Location\");",
											"    pm.expect(location.startsWith(pm.environment.get(\"REDIRECT_URI\") + \"?code=\")).is.true;",
											"    pm.collectionVariables.set(\"authorizationCodeAOCustomer\", location.substring(location.indexOf(\"?code=\") + \"?code=\".length));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "_csrf",
											"value": "{{xsrfTokenAOCustomer}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&redirect_uri={{REDIRECT_URI}}&scope={{ADMIN_CUSTOMER_UI_SCOPES}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForUserAOCustomer\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForUserAOCustomer\", json.id_token);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCodeAOCustomer}}",
											"type": "text"
										},
										{
											"key": "tenant_hint",
											"value": "{{TENANT_FOR_AO_CUSTOMER}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Access Token for User [Visma Connect]",
					"item": [
						{
							"name": "Access Token for User [3] - Use Visma Connect?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/    ",
											"    postman.setNextRequest(\"Access Token for User [3] - End Access Token for User\");",
											"} else {",
											"    console.log(\"Visma Connect is used in environment \" + pm.environment.name);",
											"    postman.setNextRequest(\"Access Token for User [3] - Get login screen\");",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [3] - Get login screen",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const jar = pm.cookies.jar();\r",
											"\r",
											"var cookieUrl = \".\" + pm.environment.get(\"VISMA_CONNECT_URL\").replace(\"https://\", \"\");\r",
											"\r",
											"jar.clear(cookieUrl, function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    console.log(error);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// get request verification token value\r",
											"var html = cheerio(responseBody);\r",
											"pm.collectionVariables.set(\"requestVerificationTokenAOCustomer\", html.find('input[name=__RequestVerificationToken]').attr('value'));"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_URL}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post&tenant_hint={{TENANT_FOR_AO_CUSTOMER}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_URL}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										},
										{
											"key": "tenant_hint",
											"value": "{{TENANT_FOR_AO_CUSTOMER}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationTokenAOCustomer}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user password",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationTokenAOCustomer}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}/password",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									],
									"path": [
										"password"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get authorize request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var html = cheerio(responseBody);",
											"",
											"// asserts",
											"pm.test(\"Response status code is redirect\", function () {",
											"    pm.response.to.have.status(302);",
											"});",
											"",
											"// In case the Location header starts with \"/recovery\", it means that Visma Connect is asking the user to",
											"// add account recovery options.",
											"// You need to log in with the user account, from a web browser, and to dismiss the Recovery popup.",
											"// We are logging the Location header to leave an indication if this scenario appeared.",
											"// We believe it happens every 3 months.",
											"console.log(pm.response.headers.get('Location'));",
											"",
											"// get authorization code value",
											"parser = require('postman-collection').Url.parse",
											"pm.collectionVariables.set(\"authorizationCodeAOCustomer\", parser(pm.response.headers.get('Location')).query.find(a => a.key === \"code\")[\"value\"]);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var codeVerifier = getVerifier();\r",
											"\r",
											"console.log(\"Code verifier :\" + codeVerifier);\r",
											"console.log(\"Code challange :\" + getCodeChallange(codeVerifier));\r",
											"\r",
											"pm.collectionVariables.set(\"codeVerifierAOCustomer\", codeVerifier );\r",
											"pm.collectionVariables.set(\"codeChallangeAOCustomer\", getCodeChallange(codeVerifier));\r",
											"\r",
											"\r",
											" function getVerifier(){\r",
											"    const value = CryptoJS.lib.WordArray.random(32);\r",
											"    return getBase64URLEncode(value);\r",
											" }\r",
											"\r",
											" function getCodeChallange(value){\r",
											"   return getBase64URLEncode(CryptoJS.SHA256(value));\r",
											" }\r",
											"\r",
											" function getBase64URLEncode(value){\r",
											"    return CryptoJS.enc.Base64.stringify(value)\r",
											"      .replace(/\\+/g, '-')\r",
											"      .replace(/\\//g, '_')\r",
											"      .replace(/=/g, '');\r",
											"  }"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?redirect_uri={{REDIRECT_URI}}&client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=teststate&code_challenge={{codeChallangeAOCustomer}}&code_challenge_method=S256&response_mode=query&tenant_hint={{TENANT_FOR_AO_CUSTOMER}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "teststate"
										},
										{
											"key": "code_challenge",
											"value": "{{codeChallangeAOCustomer}}"
										},
										{
											"key": "code_challenge_method",
											"value": "S256"
										},
										{
											"key": "response_mode",
											"value": "query"
										},
										{
											"key": "tenant_hint",
											"value": "{{TENANT_FOR_AO_CUSTOMER}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post token request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForUserAOCustomer\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForUserAOCustomer\", json.id_token);",
											"",
											"const jar = pm.cookies.jar();",
											"jar.clear(pm.request.url, function (error) {",
											"    console.log(error);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCodeAOCustomer}}",
											"type": "text"
										},
										{
											"key": "code_verifier",
											"value": "{{codeVerifierAOCustomer}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Access Token for User [3] - End Access Token for User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/actuator/health",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"actuator",
								"health"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Access token for user for AO Client Customer [4]",
			"item": [
				{
					"name": "Access Token for User [Mock with AWS]",
					"item": [
						{
							"name": "Use Mock with AWS?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    console.log(\"Mock with AWS is used in environment \" + pm.environment.name);",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/",
											"    postman.setNextRequest(\"Access Token for User [4] - Authorize\");",
											"} else {",
											"    postman.setNextRequest(\"Access Token for User [4] - Use Visma Connect?\");",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [4] - Authorize",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const cookieJar = pm.cookies.jar();\r",
											"\r",
											"cookieJar.clear(pm.environment.get(\"VISMA_CONNECT_URL\") + pm.environment.get(\"AUTHORIZE_PATH\"), function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, \r",
											"    // click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    if (error) {\r",
											"        console.log(error);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"\r",
											"// Only used with the Visma Connect mock done with AWS Cognito.\r",
											"const cookieJar = pm.cookies.jar();\r",
											"const xsrfToken = cookieJar.get(pm.environment.get(\"VISMA_CONNECT_URL\") \r",
											"    + pm.environment.get(\"LOGIN_URL\"), 'XSRF-TOKEN', function(error, cookie) {\r",
											"        if (error) {\r",
											"            console.log(error);\r",
											"        } else {\r",
											"            pm.collectionVariables.set('xsrfTokenAOClientCustomer', cookie);\r",
											"        }\r",
											"});\r",
											"pm.collectionVariables.set('xsrfTokenAOClientCustomer', xsrfToken);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});",
											"pm.test(\"Has Location header with authorization code\", function(){",
											"    pm.response.to.have.header(\"Location\");",
											"    var location = pm.response.headers.get(\"Location\");",
											"    pm.expect(location.startsWith(pm.environment.get(\"REDIRECT_URI\") + \"?code=\")).is.true;",
											"    pm.collectionVariables.set(\"authorizationCodeAOClientCustomer\", location.substring(location.indexOf(\"?code=\") + \"?code=\".length));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "_csrf",
											"value": "{{xsrfTokenAOClientCustomer}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&redirect_uri={{REDIRECT_URI}}&scope={{ADMIN_CUSTOMER_UI_SCOPES}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForUserAOClientCustomer\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForUserAOClientCustomer\", json.id_token);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCodeAOClientCustomer}}",
											"type": "text"
										},
										{
											"key": "tenant_hint",
											"value": "{{TENANT_FOR_AO_CLIENT_CUSTOMER}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Access Token for User [Visma Connect]",
					"item": [
						{
							"name": "Access Token for User [4] - Use Visma Connect?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/    ",
											"    postman.setNextRequest(\"Access Token for User [4] - End Access Token for User\");",
											"} else {",
											"    console.log(\"Visma Connect is used in environment \" + pm.environment.name);",
											"    postman.setNextRequest(\"Access Token for User [4] - Get login screen\");",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [4] - Get login screen",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const jar = pm.cookies.jar();\r",
											"\r",
											"var cookieUrl = \".\" + pm.environment.get(\"VISMA_CONNECT_URL\").replace(\"https://\", \"\");\r",
											"\r",
											"jar.clear(cookieUrl, function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    console.log(error);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// get request verification token value\r",
											"var html = cheerio(responseBody);\r",
											"pm.collectionVariables.set(\"requestVerificationTokenAOClientCustomer\", html.find('input[name=__RequestVerificationToken]').attr('value'));"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_URL}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post&tenant_hint={{TENANT_FOR_AO_CLIENT_CUSTOMER}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_URL}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										},
										{
											"key": "tenant_hint",
											"value": "{{TENANT_FOR_AO_CLIENT_CUSTOMER}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationTokenAOClientCustomer}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user password",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationTokenAOClientCustomer}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}/password",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									],
									"path": [
										"password"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get authorize request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var html = cheerio(responseBody);",
											"",
											"// asserts",
											"pm.test(\"Response status code is redirect\", function () {",
											"    pm.response.to.have.status(302);",
											"});",
											"",
											"// In case the Location header starts with \"/recovery\", it means that Visma Connect is asking the user to",
											"// add account recovery options.",
											"// You need to log in with the user account, from a web browser, and to dismiss the Recovery popup.",
											"// We are logging the Location header to leave an indication if this scenario appeared.",
											"// We believe it happens every 3 months.",
											"console.log(pm.response.headers.get('Location'));",
											"",
											"// get authorization code value",
											"parser = require('postman-collection').Url.parse",
											"pm.collectionVariables.set(\"authorizationCodeAOClientCustomer\", parser(pm.response.headers.get('Location')).query.find(a => a.key === \"code\")[\"value\"]);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var codeVerifier = getVerifier();\r",
											"\r",
											"console.log(\"Code verifier :\" + codeVerifier);\r",
											"console.log(\"Code challange :\" + getCodeChallange(codeVerifier));\r",
											"\r",
											"pm.collectionVariables.set(\"codeVerifierAOClientCustomer\", codeVerifier );\r",
											"pm.collectionVariables.set(\"codeChallangeAOClientCustomer\", getCodeChallange(codeVerifier));\r",
											"\r",
											"\r",
											" function getVerifier(){\r",
											"    const value = CryptoJS.lib.WordArray.random(32);\r",
											"    return getBase64URLEncode(value);\r",
											" }\r",
											"\r",
											" function getCodeChallange(value){\r",
											"   return getBase64URLEncode(CryptoJS.SHA256(value));\r",
											" }\r",
											"\r",
											" function getBase64URLEncode(value){\r",
											"    return CryptoJS.enc.Base64.stringify(value)\r",
											"      .replace(/\\+/g, '-')\r",
											"      .replace(/\\//g, '_')\r",
											"      .replace(/=/g, '');\r",
											"  }"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?redirect_uri={{REDIRECT_URI}}&client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=teststate&code_challenge={{codeChallangeAOClientCustomer}}&code_challenge_method=S256&response_mode=query&tenant_hint={{TENANT_FOR_AO_CLIENT_CUSTOMER}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "teststate"
										},
										{
											"key": "code_challenge",
											"value": "{{codeChallangeAOClientCustomer}}"
										},
										{
											"key": "code_challenge_method",
											"value": "S256"
										},
										{
											"key": "response_mode",
											"value": "query"
										},
										{
											"key": "tenant_hint",
											"value": "{{TENANT_FOR_AO_CLIENT_CUSTOMER}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post token request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForUserAOClientCustomer\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForUserAOClientCustomer\", json.id_token);",
											"",
											"const jar = pm.cookies.jar();",
											"jar.clear(pm.request.url, function (error) {",
											"    console.log(error);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCodeAOClientCustomer}}",
											"type": "text"
										},
										{
											"key": "code_verifier",
											"value": "{{codeVerifierAOClientCustomer}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Access Token for User [4] - End Access Token for User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/actuator/health",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"actuator",
								"health"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Access token for user - Company Admin [5]",
			"item": [
				{
					"name": "Access Token for User [Mock with AWS]",
					"item": [
						{
							"name": "Use Mock with AWS?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    console.log(\"Mock with AWS is used in environment \" + pm.environment.name);",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/",
											"    postman.setNextRequest(\"Access Token for User [5] - Authorize\");",
											"} else {",
											"    postman.setNextRequest(\"Access Token for User [5] - Use Visma Connect?\");",
											"}"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [5] - Authorize",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const cookieJar = pm.cookies.jar();\r",
											"\r",
											"cookieJar.clear(pm.environment.get(\"VISMA_CONNECT_URL\") + pm.environment.get(\"AUTHORIZE_PATH\"), function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, \r",
											"    // click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    if (error) {\r",
											"        console.log(error);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Only used with the Visma Connect mock done with AWS Cognito.\r",
											"const cookieJar = pm.cookies.jar();\r",
											"const xsrfToken = cookieJar.get(pm.environment.get(\"VISMA_CONNECT_URL\") \r",
											"    + pm.environment.get(\"LOGIN_URL\"), 'XSRF-TOKEN', function(error, cookie) {\r",
											"        if (error) {\r",
											"            console.log(error);\r",
											"        } else {\r",
											"            pm.collectionVariables.set('xsrfToken', cookie);\r",
											"        }\r",
											"});\r",
											"pm.collectionVariables.set('xsrfToken', xsrfToken);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});",
											"pm.test(\"Has Location header with authorization code\", function(){",
											"    pm.response.to.have.header(\"Location\");",
											"    var location = pm.response.headers.get(\"Location\");",
											"    pm.expect(location.startsWith(pm.environment.get(\"REDIRECT_URI\") + \"?code=\")).is.true;",
											"    pm.collectionVariables.set(\"authorizationCode\", location.substring(location.indexOf(\"?code=\") + \"?code=\".length));",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "{{COMPANY_ADMIN_USER_EMAIL}}",
											"type": "text"
										},
										{
											"key": "password",
											"value": "{{COMPANY_ADMIN_USER_PASSWORD}}",
											"type": "text"
										},
										{
											"key": "_csrf",
											"value": "{{xsrfToken}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&redirect_uri={{REDIRECT_URI}}&scope={{ADMIN_CUSTOMER_UI_SCOPES}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForCompanyAdminUser\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForCompanyAdminUser\", json.id_token);",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCode}}",
											"type": "text"
										},
										{
											"key": "tenant_hint",
											"value": "{{COMPANY_TENANT_ID}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Access Token for User [Visma Connect]",
					"item": [
						{
							"name": "Access Token for User [5] - Use Visma Connect?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/    ",
											"    postman.setNextRequest(\"Access Token for User [5] - End Access Token for User\");",
											"} else {",
											"    console.log(\"Visma Connect is used in environment \" + pm.environment.name);",
											"    postman.setNextRequest(\"Access Token for User [5] - Get login screen\");",
											"}"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [5] - Get login screen",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const jar = pm.cookies.jar();\r",
											"\r",
											"var cookieUrl = \".\" + pm.environment.get(\"VISMA_CONNECT_URL\").replace(\"https://\", \"\");\r",
											"\r",
											"jar.clear(cookieUrl, function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    console.log(error);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// get request verification token value\r",
											"var html = cheerio(responseBody);\r",
											"pm.collectionVariables.set(\"requestVerificationToken\", html.find('input[name=__RequestVerificationToken]').attr('value'));"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_URL}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post&tenant_hint={{COMPANY_TENANT_ID}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_URL}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										},
										{
											"key": "tenant_hint",
											"value": "{{COMPANY_TENANT_ID}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{COMPANY_ADMIN_USER_EMAIL}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{COMPANY_ADMIN_USER_PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationToken}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user password",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{COMPANY_ADMIN_USER_EMAIL}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{COMPANY_ADMIN_USER_PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationToken}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}/password",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									],
									"path": [
										"password"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get authorize request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var html = cheerio(responseBody);",
											"",
											"// asserts",
											"pm.test(\"Response status code is redirect\", function () {",
											"    pm.response.to.have.status(302);",
											"});",
											"",
											"// In case the Location header starts with \"/recovery\", it means that Visma Connect is asking the user to",
											"// add account recovery options.",
											"// You need to log in with the user account, from a web browser, and to dismiss the Recovery popup.",
											"// We are logging the Location header to leave an indication if this scenario appeared.",
											"// We believe it happens every 3 months.",
											"console.log(pm.response.headers.get('Location'));",
											"",
											"// get authorization code value",
											"parser = require('postman-collection').Url.parse",
											"pm.collectionVariables.set(\"authorizationCode\", parser(pm.response.headers.get('Location')).query.find(a => a.key === \"code\")[\"value\"]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var codeVerifier = getVerifier();\r",
											"\r",
											"console.log(\"Code verifier :\" + codeVerifier);\r",
											"console.log(\"Code challange :\" + getCodeChallange(codeVerifier));\r",
											"\r",
											"pm.collectionVariables.set(\"codeVerifier\", codeVerifier );\r",
											"pm.collectionVariables.set(\"codeChallange\", getCodeChallange(codeVerifier));\r",
											"\r",
											"\r",
											" function getVerifier(){\r",
											"    const value = CryptoJS.lib.WordArray.random(32);\r",
											"    return getBase64URLEncode(value);\r",
											" }\r",
											"\r",
											" function getCodeChallange(value){\r",
											"   return getBase64URLEncode(CryptoJS.SHA256(value));\r",
											" }\r",
											"\r",
											" function getBase64URLEncode(value){\r",
											"    return CryptoJS.enc.Base64.stringify(value)\r",
											"      .replace(/\\+/g, '-')\r",
											"      .replace(/\\//g, '_')\r",
											"      .replace(/=/g, '');\r",
											"  }"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?redirect_uri={{REDIRECT_URI}}&client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=teststate&code_challenge={{codeChallange}}&code_challenge_method=S256&response_mode=query&tenant_hint={{COMPANY_TENANT_ID}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "teststate"
										},
										{
											"key": "code_challenge",
											"value": "{{codeChallange}}"
										},
										{
											"key": "code_challenge_method",
											"value": "S256"
										},
										{
											"key": "response_mode",
											"value": "query"
										},
										{
											"key": "tenant_hint",
											"value": "{{COMPANY_TENANT_ID}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post token request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForCompanyAdminUser\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForCompanyAdminUser\", json.id_token);",
											"",
											"const jar = pm.cookies.jar();",
											"jar.clear(pm.request.url, function (error) {",
											"    console.log(error);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCode}}",
											"type": "text"
										},
										{
											"key": "code_verifier",
											"value": "{{codeVerifier}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Access Token for User [5] - End Access Token for User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/actuator/health",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"actuator",
								"health"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Access token for user for Distributor [6]",
			"item": [
				{
					"name": "Access Token for User [Mock with AWS]",
					"item": [
						{
							"name": "Use Mock with AWS?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    console.log(\"Mock with AWS is used in environment \" + pm.environment.name);",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/",
											"    postman.setNextRequest(\"Access Token for User [6] - Authorize\");",
											"} else {",
											"    postman.setNextRequest(\"Access Token for User [6] - Use Visma Connect?\");",
											"}"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [6] - Authorize",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const cookieJar = pm.cookies.jar();\r",
											"\r",
											"cookieJar.clear(pm.environment.get(\"VISMA_CONNECT_URL\") + pm.environment.get(\"AUTHORIZE_PATH\"), function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, \r",
											"    // click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    if (error) {\r",
											"        console.log(error);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Only used with the Visma Connect mock done with AWS Cognito.\r",
											"const cookieJar = pm.cookies.jar();\r",
											"const xsrfToken = cookieJar.get(pm.environment.get(\"VISMA_CONNECT_URL\") \r",
											"    + pm.environment.get(\"LOGIN_URL\"), 'XSRF-TOKEN', function(error, cookie) {\r",
											"        if (error) {\r",
											"            console.log(error);\r",
											"        } else {\r",
											"            pm.collectionVariables.set('xsrfToken', cookie);\r",
											"        }\r",
											"});\r",
											"pm.collectionVariables.set('xsrfToken', xsrfToken);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});",
											"pm.test(\"Has Location header with authorization code\", function(){",
											"    pm.response.to.have.header(\"Location\");",
											"    var location = pm.response.headers.get(\"Location\");",
											"    pm.expect(location.startsWith(pm.environment.get(\"REDIRECT_URI\") + \"?code=\")).is.true;",
											"    pm.collectionVariables.set(\"authorizationCode\", location.substring(location.indexOf(\"?code=\") + \"?code=\".length));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "_csrf",
											"value": "{{xsrfToken}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&redirect_uri={{REDIRECT_URI}}&scope={{ADMIN_CUSTOMER_UI_SCOPES}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"distributorAccessTokenForUser\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForUser\", json.id_token);",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCode}}",
											"type": "text"
										},
										{
											"key": "tenant_hint",
											"value": "{{DISTRIBUTOR_TENANT_ID}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Access Token for User [Visma Connect]",
					"item": [
						{
							"name": "Access Token for User [6] - Use Visma Connect?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    // When using setNextRequest make sure you don't have to requests with the same name!",
											"    // Request ID can also ne used.",
											"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/    ",
											"    postman.setNextRequest(\"Access Token for User [6] - End Access Token for User\");",
											"} else {",
											"    console.log(\"Visma Connect is used in environment \" + pm.environment.name);",
											"    postman.setNextRequest(\"Access Token for User [6] - Get login screen\");",
											"}"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User [6] - Get login screen",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const jar = pm.cookies.jar();\r",
											"\r",
											"var cookieUrl = \".\" + pm.environment.get(\"VISMA_CONNECT_URL\").replace(\"https://\", \"\");\r",
											"\r",
											"jar.clear(cookieUrl, function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    console.log(error);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// get request verification token value\r",
											"var html = cheerio(responseBody);\r",
											"pm.collectionVariables.set(\"requestVerificationToken\", html.find('input[name=__RequestVerificationToken]').attr('value'));"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_URL}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post&tenant_hint={{CUSTOMER_TENANT_ID}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_URL}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										},
										{
											"key": "tenant_hint",
											"value": "{{CUSTOMER_TENANT_ID}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationToken}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user password",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationToken}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}/password",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									],
									"path": [
										"password"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get authorize request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var html = cheerio(responseBody);",
											"",
											"// asserts",
											"pm.test(\"Response status code is redirect\", function () {",
											"    pm.response.to.have.status(302);",
											"});",
											"",
											"// In case the Location header starts with \"/recovery\", it means that Visma Connect is asking the user to",
											"// add account recovery options.",
											"// You need to log in with the user account, from a web browser, and to dismiss the Recovery popup.",
											"// We are logging the Location header to leave an indication if this scenario appeared.",
											"// We believe it happens every 3 months.",
											"console.log(pm.response.headers.get('Location'));",
											"",
											"// get authorization code value",
											"parser = require('postman-collection').Url.parse",
											"pm.collectionVariables.set(\"authorizationCode\", parser(pm.response.headers.get('Location')).query.find(a => a.key === \"code\")[\"value\"]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var codeVerifier = getVerifier();\r",
											"\r",
											"console.log(\"Code verifier :\" + codeVerifier);\r",
											"console.log(\"Code challange :\" + getCodeChallange(codeVerifier));\r",
											"\r",
											"pm.collectionVariables.set(\"codeVerifier\", codeVerifier );\r",
											"pm.collectionVariables.set(\"codeChallange\", getCodeChallange(codeVerifier));\r",
											"\r",
											"\r",
											" function getVerifier(){\r",
											"    const value = CryptoJS.lib.WordArray.random(32);\r",
											"    return getBase64URLEncode(value);\r",
											" }\r",
											"\r",
											" function getCodeChallange(value){\r",
											"   return getBase64URLEncode(CryptoJS.SHA256(value));\r",
											" }\r",
											"\r",
											" function getBase64URLEncode(value){\r",
											"    return CryptoJS.enc.Base64.stringify(value)\r",
											"      .replace(/\\+/g, '-')\r",
											"      .replace(/\\//g, '_')\r",
											"      .replace(/=/g, '');\r",
											"  }"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?redirect_uri={{REDIRECT_URI}}&client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=teststate&code_challenge={{codeChallange}}&code_challenge_method=S256&response_mode=query&tenant_hint={{DISTRIBUTOR_TENANT_ID}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "teststate"
										},
										{
											"key": "code_challenge",
											"value": "{{codeChallange}}"
										},
										{
											"key": "code_challenge_method",
											"value": "S256"
										},
										{
											"key": "response_mode",
											"value": "query"
										},
										{
											"key": "tenant_hint",
											"value": "{{DISTRIBUTOR_TENANT_ID}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post token request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"distributorAccessTokenForUser\", json.access_token);",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"idTokenForUser\", json.id_token);",
											"",
											"const jar = pm.cookies.jar();",
											"jar.clear(pm.request.url, function (error) {",
											"    console.log(error);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCode}}",
											"type": "text"
										},
										{
											"key": "code_verifier",
											"value": "{{codeVerifier}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Access Token for User [6] - End Access Token for User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/actuator/health",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"actuator",
								"health"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Access token for user another customer [1]",
			"item": [
				{
					"name": "Access Token for User [Mock with AWS]",
					"item": [
						{
							"name": "Use Mock with AWS?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    console.log(\"Mock with AWS is used in environment \" + pm.environment.name);",
											"    postman.setNextRequest(\"Access Token for User Another Customer [1] - Authorize\");",
											"} else {",
											"    postman.setNextRequest(\"Access Token for User Another Customer [1] - Use Visma Connect?\");",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User Another Customer [1] - Authorize",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const cookieJar = pm.cookies.jar();\r",
											"\r",
											"cookieJar.clear(pm.environment.get(\"VISMA_CONNECT_URL\") + pm.environment.get(\"AUTHORIZE_PATH\"), function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, \r",
											"    // click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    if (error) {\r",
											"        console.log(error);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Only used with the Visma Connect mock done with AWS Cognito.\r",
											"const cookieJar = pm.cookies.jar();\r",
											"const xsrfToken = cookieJar.get(pm.environment.get(\"VISMA_CONNECT_URL\") \r",
											"    + pm.environment.get(\"LOGIN_URL\"), 'XSRF-TOKEN', function(error, cookie) {\r",
											"        if (error) {\r",
											"            console.log(error);\r",
											"        } else {\r",
											"            pm.collectionVariables.set('xsrfToken', cookie);\r",
											"        }\r",
											"});\r",
											"pm.collectionVariables.set('xsrfToken', xsrfToken);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});",
											"pm.test(\"Has Location header with authorization code\", function(){",
											"    pm.response.to.have.header(\"Location\");",
											"    var location = pm.response.headers.get(\"Location\");",
											"    pm.expect(location.startsWith(pm.environment.get(\"REDIRECT_URI\") + \"?code=\")).is.true;",
											"    pm.collectionVariables.set(\"authorizationCode\", location.substring(location.indexOf(\"?code=\") + \"?code=\".length));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "_csrf",
											"value": "{{xsrfToken}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&redirect_uri={{REDIRECT_URI}}&scope={{ADMIN_CUSTOMER_UI_SCOPES}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForUserForAnotherCustomer\", json.access_token);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCode}}",
											"type": "text"
										},
										{
											"key": "tenant_hint",
											"value": "{{CUSTOMER_TENANT_ID_DIFFERENT_CONTEXT}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Access Token for User [Visma Connect]",
					"item": [
						{
							"name": "Access Token for User Another Customer [1] - Use Visma Connect?",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
											"    postman.setNextRequest(\"Access Token for User Another Customer [1] - End Access Token for User\");",
											"} else {",
											"    console.log(\"Visma Connect is used in environment \" + pm.environment.name);",
											"    postman.setNextRequest(\"Access Token for User Another Customer [1] - Get login screen\");",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/actuator/health",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Access Token for User Another Customer [1] - Get login screen",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// clear cookies\r",
											"const jar = pm.cookies.jar();\r",
											"\r",
											"var cookieUrl = \".\" + pm.environment.get(\"VISMA_CONNECT_URL\").replace(\"https://\", \"\");\r",
											"\r",
											"jar.clear(cookieUrl, function (error) {\r",
											"    // To whitelist a domain so that cookies can be programmatically accessed, click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
											"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
											"    console.log(error);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// asserts\r",
											"pm.test(\"Response status code is ok.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// get request verification token value\r",
											"var html = cheerio(responseBody);\r",
											"pm.collectionVariables.set(\"requestVerificationToken\", html.find('input[name=__RequestVerificationToken]').attr('value'));"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_URL}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post&tenant_hint={{CUSTOMER_TENANT_ID_DIFFERENT_CONTEXT}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{LOGIN_URL}}"
									],
									"query": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "test_scope"
										},
										{
											"key": "response_mode",
											"value": "form_post"
										},
										{
											"key": "tenant_hint",
											"value": "{{CUSTOMER_TENANT_ID_DIFFERENT_CONTEXT}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user login",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationToken}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post user password",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Successful status code\", function(){",
											"    pm.expect(pm.response.code).to.eq(302);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "Username",
											"value": "{{USER}}",
											"type": "text"
										},
										{
											"key": "Password",
											"value": "{{PASSWORD}}",
											"type": "text"
										},
										{
											"key": "__RequestVerificationToken",
											"value": "{{requestVerificationToken}}",
											"type": "text"
										},
										{
											"key": "ClientId",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "ReturnUrl",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}/password",
									"host": [
										"{{VISMA_CONNECT_URL}}"
									],
									"path": [
										"password"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get authorize request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var html = cheerio(responseBody);",
											"",
											"// asserts",
											"pm.test(\"Response status code is redirect\", function () {",
											"    pm.response.to.have.status(302);",
											"});",
											"",
											"// In case the Location header starts with \"/recovery\", it means that Visma Connect is asking the user to",
											"// add account recovery options.",
											"// You need to log in with the user account, from a web browser, and to dismiss the Recovery popup.",
											"// We are logging the Location header to leave an indication if this scenario appeared.",
											"// We believe it happens every 3 months.",
											"console.log(pm.response.headers.get('Location'));",
											"",
											"// get authorization code value",
											"parser = require('postman-collection').Url.parse",
											"pm.collectionVariables.set(\"authorizationCode\", parser(pm.response.headers.get('Location')).query.find(a => a.key === \"code\")[\"value\"]);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var codeVerifier = getVerifier();\r",
											"\r",
											"console.log(\"Code verifier :\" + codeVerifier);\r",
											"console.log(\"Code challange :\" + getCodeChallange(codeVerifier));\r",
											"\r",
											"pm.collectionVariables.set(\"codeVerifier\", codeVerifier );\r",
											"pm.collectionVariables.set(\"codeChallange\", getCodeChallange(codeVerifier));\r",
											"\r",
											"\r",
											" function getVerifier(){\r",
											"    const value = CryptoJS.lib.WordArray.random(32);\r",
											"    return getBase64URLEncode(value);\r",
											" }\r",
											"\r",
											" function getCodeChallange(value){\r",
											"   return getBase64URLEncode(CryptoJS.SHA256(value));\r",
											" }\r",
											"\r",
											" function getBase64URLEncode(value){\r",
											"    return CryptoJS.enc.Base64.stringify(value)\r",
											"      .replace(/\\+/g, '-')\r",
											"      .replace(/\\//g, '_')\r",
											"      .replace(/=/g, '');\r",
											"  }"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": false
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?redirect_uri={{REDIRECT_URI}}&client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=teststate&code_challenge={{codeChallange}}&code_challenge_method=S256&response_mode=query&tenant_hint={{CUSTOMER_TENANT_ID_DIFFERENT_CONTEXT}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
									],
									"query": [
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}"
										},
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
										},
										{
											"key": "state",
											"value": "teststate"
										},
										{
											"key": "code_challenge",
											"value": "{{codeChallange}}"
										},
										{
											"key": "code_challenge_method",
											"value": "S256"
										},
										{
											"key": "response_mode",
											"value": "query"
										},
										{
											"key": "tenant_hint",
											"value": "{{CUSTOMER_TENANT_ID_DIFFERENT_CONTEXT}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Post token request",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var json = pm.response.json();",
											"",
											"// asserts",
											"pm.test(\"Response status code is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(json.access_token).not.equal(null);",
											"});",
											"",
											"// get request verification token value",
											"pm.collectionVariables.set(\"accessTokenForUserForAnotherCustomer\", json.access_token);",
											"",
											"const jar = pm.cookies.jar();",
											"jar.clear(pm.request.url, function (error) {",
											"    console.log(error);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "client_id",
											"value": "{{CLIENT_ID_ADMIN_UI}}",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{REDIRECT_URI}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authorizationCode}}",
											"type": "text"
										},
										{
											"key": "code_verifier",
											"value": "{{codeVerifier}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Access Token for User Another Customer [1] - End Access Token for User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/actuator/health",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"actuator",
								"health"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Company",
			"item": [
				{
					"name": "Create Company",
					"item": [
						{
							"name": "Create new company with mandatory fields",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company with same normalized org no",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 409.\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"There is already a company with same org number\", function () {\r",
											"  pm.expect(pm.response.text()).to.include('COMPANY_WITH_ORGANIZATION_NUMBER_COUNTRY_CODE_ALREADY_EXIST');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}A\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}A\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company with mandatory fields - name already exists",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 409.\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"jsonData = JSON.parse(responseBody)\r",
											"\r",
											"//2.\r",
											"pm.test(\"A company with name AccessMngmtAPIPostman_\" + pm.collectionVariables.get('randomDataGenerator') + \" already exists under the current customer.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_NAME_ALREADY_EXIST');\r",
											"    pm.expect(jsonData.messageParameters[0]).to.include(\"AccessMngmtAPIPostman_\"+ pm.collectionVariables.get('randomDataGenerator'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_new\",\r\n    \"postalCode\": \"1234_new\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company with mandatory fields - invalid countryCode",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"There is no country with code invalid_\" + (pm.environment.get(\"COUNTRY_CODE\")), function () {\r",
											"  pm.expect(pm.response.text()).to.include('COUNTRY_NOT_FOUND');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"invalid_{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - company already exists",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 409.\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A company with name AccessMngmtAPIPostman_\" + pm.collectionVariables.get('randomDataGenerator') + \" already exists under the current customer.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_NAME_ALREADY_EXIST');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - organizationNumber & countryCode already exists",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 409.\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A company with the country code: \" + pm.environment.get('COUNTRY_CODE') + \" and organization number: \" + pm.collectionVariables.get('randomDataGenerator') + \" already exists under the current customer hierarchy.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_WITH_ORGANIZATION_NUMBER_COUNTRY_CODE_ALREADY_EXIST');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}_new\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234_new\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - organizationNumber field missing",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Field Organization number cannot be null. Please provide valid input.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALIDATION_ERROR');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber: must not be null');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - empty organizationNumber",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Field Organization number cannot be empty. Please provide valid input.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALIDATION_ERROR');\r",
											"    pm.expect(pm.response.text()).to.include('\"organizationNumber: must not be empty');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - empty countryCode",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Field Country code cannot be empty. Please provide valid input.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_CANNOT_BE_EMPTY');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - empty name",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Field Name cannot be empty. Please provide valid input.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALIDATION_ERROR');\r",
											"    pm.expect(pm.response.text()).to.include('name: must not be empty');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - empty postalCode",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Field Postal Code cannot be empty. Please provide valid input.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALIDATION_ERROR');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode: must not be empty');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - cross site scripting name",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Name contains possible cross site scripting.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_CONTAINS_POSSIBLE_XSS');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Comp_<script>alert('1')</script>\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - cross site scripting countryCode",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Country code contains possible cross site scripting.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_CONTAINS_POSSIBLE_XSS');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"Code_<script>alert('1')</script>\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - cross site scripting organizationNumber",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Organization number contains possible cross site scripting.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_CONTAINS_POSSIBLE_XSS');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"Nr_<script>alert('1')</script>\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - cross site scripting postalCode",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Postal Code contains possible cross site scripting.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_CONTAINS_POSSIBLE_XSS');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"<script>\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - cross site scripting address1",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Address 1 contains possible cross site scripting.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_CONTAINS_POSSIBLE_XSS');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"Address_<script>alert('1')</script>\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - name is longer than 60 characters",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Name must be maximum 60 characters long.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALIDATION_ERROR');\r",
											"    pm.expect(pm.response.text()).to.include('name: Name cannot exceed 60 characters');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - organizationNumber is longer than 50 characters",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Organization number must be maximum 50 characters long.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALIDATION_ERROR');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber: Organization number cannot exceed 50 characters');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}_invOrgNr\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company with token for company administrator",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 403.\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company - properties are too long",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2. \r",
											"pm.test(\"Request object has property too long\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"FIELD_VALIDATION_ERROR\");\r",
											"    pm.expect(pm.response.text()).to.include(\"description: Description cannot exceed 255 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"emailAddress: Email address cannot exceed 320 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"address2: Address2 cannot exceed 50 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"address1: Address1 cannot exceed 50 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"city: City cannot exceed 50 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"organizationNumber: Organization number cannot exceed 50 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"name: Name cannot exceed 60 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"postalCode: Postal code cannot exceed 10 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"telephone: Telephone cannot exceed 20 characters\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}12345678901234567890123456789012345678901234567890\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"123456789012345678901234567890123456789012345678901234567890\",\r\n    \"postalCode\": \"1234567890123456789012345678901234567890\",\r\n    \"address1\": \"123456789012345678901234567890123456789012345678901\",\r\n    \"address2\": \"123456789012345678901234567890123456789012345678901\",\r\n    \"city\": \"123456789012345678901234567890123456789012345678901\",\r\n    \"telephone\": \"123456789012345678901\",\r\n    \"emailAddress\": \"123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901\",\r\n    \"description\": \"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company with mandatory fields",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company with all fields",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to false\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(false);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\",\r\n    \"informUsersAboutRoleAssignmentUpdates\" : false,\r\n    \"demoCompany\" : false\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company with all fields",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company demo and doNotInformUsersForRoleAssignments",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to false\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(false);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Demo company is true\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(true);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\",\r\n    \"informUsersAboutRoleAssignmentUpdates\" : false,\r\n    \"demoCompany\" : true\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete demo company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Get Company",
					"item": [
						{
							"name": "Get company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.text()).to.include('idCompany');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property country code matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property company tenant id matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.environment.get(\"COMPANY_TENANT_ID\"));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - subscriber viewer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.text()).to.include('idCompany');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property country code matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property company tenant id matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.environment.get(\"COMPANY_TENANT_ID\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{CUSTOMER_TENANT_ID}}/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{CUSTOMER_TENANT_ID}}",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - company does not exist",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/11111111-1111-1111-1111-111111111111",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"11111111-1111-1111-1111-111111111111"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - invalid company tenant",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"There is no tenant with id: \" + (pm.environment.get(\"COMPANY_TENANT_ID\")) + \"xxx\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALUE_INVALID');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}xxx",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}xxx"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - token for another customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserForAnotherCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Export company by clone tenantId",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 2002\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/companies/export?filter=tenantId,eq,{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"companies",
										"export"
									],
									"query": [
										{
											"key": "filter",
											"value": "tenantId,eq,{{companyTenantId}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Get Company with token for company administrator",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - same company from access token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property country code matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property company tenant id matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.environment.get(\"COMPANY_TENANT_ID\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - get created company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Get Client Company",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get client company company by clone tenantId",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property country code matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property company tenant id matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"cloneClientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Export client company filter by name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 2002\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies/export?filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies",
										"export"
									],
									"query": [
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete client company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get client company company by clone tenantId after client company is deleted",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"    pm.expect(pm.response.text()).to.include('messageParameters');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property code matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().code).to.eql('COMPANY_NOT_FOUND');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property message matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().message).to.eql('There is no company with tenant id ' + pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Update Company",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"pm.collectionVariables.set(\"companyNameEncoded\", encodeURIComponent(companyName));\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"companyName\"));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"UP_AccessMngmtAPIPostman_{{randomDataGenerator}}_UP\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_UP\",\r\n    \"address1\": \"test_address1_UP\",\r\n    \"city\": \"test_city_UP\",\r\n    \"postalCode\": \"2849242_UP\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company after update",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property matches COUNTRY_CODE\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property matches companyTenantId\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously updated.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(\"UP_\" + pm.collectionVariables.get(\"companyName\") + \"_UP\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - change name to uppercase",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"UP_ACCESSMNGMTAPIPOSTMAN_{{randomDataGenerator}}_UP\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_UP\",\r\n    \"address1\": \"test_address1_UP\",\r\n    \"city\": \"test_city_UP\",\r\n    \"postalCode\": \"2849242_UP\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company after update after change name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property matches COUNTRY_CODE\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property matches companyTenantId\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously updated.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(\"UP_\" + pm.collectionVariables.get(\"companyName\").toUpperCase() + \"_UP\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - empty body",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1. Check status code\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - missing tenantId",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}_UP\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_UP\",\r\n    \"address1\": \"test_address1_UP\",\r\n    \"city\": \"test_city_UP\",\r\n    \"postalCode\": \"2849242_UP\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - invalid tenantId",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1. Check status code\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2. Check message and code returned in response\r",
											"var companyTenantId = pm.variables.get(\"companyTenantId\");\r",
											"pm.test(\"There is no tenant with id: \" + companyTenantId + \"xxx\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALUE_INVALID');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}_UP\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_UP\",\r\n    \"address1\": \"test_address1_UP\",\r\n    \"city\": \"test_city_UP\",\r\n    \"postalCode\": \"2849242_UP\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}xxx",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}xxx"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - cross site scripting name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Name contains possible cross site scripting.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_CONTAINS_POSSIBLE_XSS');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Comp_<script>alert('1')</script>\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_UP\",\r\n    \"address1\": \"test_address1_UP\",\r\n    \"city\": \"test_city_UP\",\r\n    \"postalCode\": \"2849242_UP\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - cross site scripting organizationNumber",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Organization number contains possible cross site scripting.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_CONTAINS_POSSIBLE_XSS');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"Nr_<script>alert('1')</script>\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - name is longer than 60 characters",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Value for Name must be maximum 60 characters long.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('FIELD_VALIDATION_ERROR');\r",
											"    pm.expect(pm.response.text()).to.include('name: Name cannot exceed 60 characters');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - properties are too long",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2. \r",
											"pm.test(\"Request object has property too long\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"FIELD_VALIDATION_ERROR\");\r",
											"    pm.expect(pm.response.text()).to.include(\"description: Description cannot exceed 255 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"emailAddress: Email address cannot exceed 320 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"address2: Address2 cannot exceed 50 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"address1: Address1 cannot exceed 50 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"city: City cannot exceed 50 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"organizationNumber: Organization number cannot exceed 50 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"name: Name cannot exceed 60 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"postalCode: Postal code cannot exceed 10 characters\");\r",
											"    pm.expect(pm.response.text()).to.include(\"telephone: Telephone cannot exceed 20 characters\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}12345678901234567890123456789012345678901234567890\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"123456789012345678901234567890123456789012345678901234567890\",\r\n    \"postalCode\": \"1234567890123456789012345678901234567890\",\r\n    \"address1\": \"123456789012345678901234567890123456789012345678901\",\r\n    \"address2\": \"123456789012345678901234567890123456789012345678901\",\r\n    \"city\": \"123456789012345678901234567890123456789012345678901\",\r\n    \"telephone\": \"123456789012345678901\",\r\n    \"emailAddress\": \"123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901\",\r\n    \"description\": \"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456\"\r\n\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "4",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "contextTypeName,desc",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeGrantRole",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "contextTypeName,actionType",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log filter by change = company name and actionType = addCompany",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})\r",
											"\r",
											"//4.\r",
											"pm.test(\"Change log return values matches expectations\", function (){\r",
											"    var content = pm.response.json().content;\r",
											"    pm.expect(content).to.have.lengthOf(2);\r",
											"    pm.expect(content[0].actionType).to.eql('actionTypeNewCompany');\r",
											"    pm.expect(content[0].change).to.include(pm.collectionVariables.get('companyName'));\r",
											"\r",
											"    pm.expect(content[1].actionType).to.eql('actionTypeUpdateName');\r",
											"    pm.expect(content[1].change).to.include(pm.collectionVariables.get('companyName')+ '_UP');\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?filter=change,like,{{companyName}}&actionType,in,[actionTypeNewCompany]&sort=whenEdited,ASC",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "4",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "contextTypeName,desc",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeGrantRole",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "contextTypeName,actionType",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "change,like,{{companyName}}"
										},
										{
											"key": "actionType,in,[actionTypeNewCompany]",
											"value": null
										},
										{
											"key": "sort",
											"value": "whenEdited,ASC"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log - subscriber viewer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{CUSTOMER_TENANT_ID}}/companies/{{companyTenantId}}/changeLog",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{CUSTOMER_TENANT_ID}}",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "4",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "contextTypeName,desc",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeGrantRole",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "contextTypeName,actionType",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Export company change log",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog/export",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog",
										"export"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "4",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "contextTypeName,desc",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeGrantRole",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "contextTypeName,actionType",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Export company change log - subscriber viewer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{CUSTOMER_TENANT_ID}}/companies/{{companyTenantId}}/changeLog/export",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{CUSTOMER_TENANT_ID}}",
										"companies",
										"{{companyTenantId}}",
										"changeLog",
										"export"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "4",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "contextTypeName,desc",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeGrantRole",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "contextTypeName,actionType",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log - size 2, page 0",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?page=0&size=2",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "page",
											"value": "0"
										},
										{
											"key": "size",
											"value": "2"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log - fields = whenEdited & actionType",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"var jsonData = pm.response.json().content[1];\r",
											"pm.test(\"Expect response contains all keys\", function () {\r",
											"    var keys = Object.keys(jsonData);\r",
											"    pm.expect(keys).to.eql([\"actionType\", \"whenEdited\"]);\r",
											"    pm.expect(keys.length).to.eql(2);\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?fields=whenEdited,actionType",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "fields",
											"value": "whenEdited,actionType"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log - filter by action type",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"var jsonData = pm.response.json().content[0];\r",
											"pm.test(\"Expect response contains all keys\", function () {\r",
											"    var keys = Object.keys(jsonData);\r",
											"    pm.expect(keys).to.eql([\"actionType\", \"change\", \"changedFrom\", \"whenEdited\", \"userNameChangedBy\"]);\r",
											"    pm.expect(keys.length).to.eql(5);\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?filter=actionType,eq,actionTypeUpdateCompanyDetails",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeUpdateCompanyDetails"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log - filter by userNameChangedBy Like",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"var jsonData = pm.response.json().content[0];\r",
											"pm.test(\"Expect response contains all keys\", function () {\r",
											"    var keys = Object.keys(jsonData);\r",
											"    pm.expect(keys).to.eql([\"actionType\", \"change\", \"whenEdited\", \"userNameChangedBy\"]);\r",
											"    pm.expect(keys.length).to.eql(4);\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})\r",
											"\r",
											"//5.\r",
											"pm.test(\"Check if the response is filtered correct\", function () {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    jsonData.content.forEach(function (value) {\r",
											"        pm.expect(value.userNameChangedBy).to.eql(\"odpuserta@gmail.com\")\r",
											"    })\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?filter=userNameChangedBy,like,odpuserta@gmail",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "filter",
											"value": "userNameChangedBy,like,odpuserta@gmail"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log - filter by userNameChangedBy EQ",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"var jsonData = pm.response.json().content[0];\r",
											"pm.test(\"Expect response contains all keys\", function () {\r",
											"    var keys = Object.keys(jsonData);\r",
											"    pm.expect(keys).to.eql([\"actionType\", \"change\", \"whenEdited\", \"userNameChangedBy\"]);\r",
											"    pm.expect(keys.length).to.eql(4);\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})\r",
											"\r",
											"//5.\r",
											"pm.test(\"Check if the response is filtered correct\", function () {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    jsonData.content.forEach(function (value) {\r",
											"        pm.expect(value.userNameChangedBy).to.eql(\"odpuserta@gmail.com\")\r",
											"    })\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?filter=userNameChangedBy,like,odpuserta@gmail.com",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "filter",
											"value": "userNameChangedBy,like,odpuserta@gmail.com"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log - filter (LIKE) by action type",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?filter=actionType,eq,actionTypeNewC",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "1",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeNewC"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log - sort asc by when edited",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})\r",
											"\r",
											"//4.\r",
											"pm.test(\"Check if the response is sorted correct by whenEdited\", function () {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    contents = jsonData.content\r",
											"    jsonData.content.forEach(function (value, index, contents) {\r",
											"        if (index < (jsonData.content.length - 1)) {\r",
											"            pm.expect(value.whenEdited).to.lte(contents[index + 1].whenEdited)\r",
											"        }\r",
											"    })\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?sort=whenEdited,asc",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "sort",
											"value": "whenEdited,asc"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new user",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//save connectUserId and userEmail value from response body to collection variables\r",
											"var jsonData = JSON.parse(responseBody);\r",
											"var connectUserId = jsonData.connectUserId;\r",
											"var userEmail = jsonData.userEmail;\r",
											"pm.collectionVariables.set(\"connectUserId\", connectUserId);\r",
											"pm.collectionVariables.set(\"userEmail\", userEmail);\r",
											"var firstName = jsonData.firstName;\r",
											"var lastName = jsonData.lastName;\r",
											"pm.collectionVariables.set(\"userName\", firstName + \" \" + lastName);\r",
											"\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('connectUserId');\r",
											"    pm.expect(pm.response.text()).to.include('userEmail');\r",
											"    pm.expect(pm.response.text()).to.include('firstName');\r",
											"    pm.expect(pm.response.text()).to.include('lastName');\r",
											"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
											"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company role  to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log filter by change = entityName",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Total number of Records is 10000\", function (){\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(10000);\r",
											"})\r",
											"\r",
											"//4.\r",
											"pm.test(\"Check if the response update of name.\", function () {\r",
											"    var jsonData = JSON.parse(responseBody);\r",
											"    var log = jsonData.content[0];\r",
											"    pm.expect(log.actionType).to.be.eq(\"actionTypeGrantRole\");\r",
											"    pm.expect(log.entityName).to.be.eq(pm.collectionVariables.get('userName'));\r",
											"    pm.expect(log.change).to.be.eq(pm.environment.get('SERVICE_DISPLAY_NAME') + \" - \" + pm.environment.get('ROLE_NAME'));\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/changeLog?sort=whenEdited,desc&filter=change,like,{{userName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"changeLog"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "4",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "contextTypeName,desc",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeGrantRole",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "contextTypeName,actionType",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "whenEdited,desc"
										},
										{
											"key": "filter",
											"value": "change,like,{{userName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users",
										"{{connectUserId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "New Folder",
					"item": []
				},
				{
					"name": "Update Company with access token for company administrator",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"pm.collectionVariables.set(\"companyNameEncoded\", encodeURIComponent(companyName));\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update created company - no access",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403.\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"UP_AccessMngmtAPIPostman_{{randomDataGenerator}}_UP\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_UP\",\r\n    \"address1\": \"test_address1_UP\",\r\n    \"city\": \"test_city_UP\",\r\n    \"postalCode\": \"2849242_UP\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update company from access token - change address",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"ODPAutoTests_AMA_DO_NOT_DELETE\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{COMPANY_ORG_NUMBER}}\",\r\n    \"address1\": \"{{COMPANY_ADDRESS}}_UP\",\r\n    \"postalCode\" : \"0504\",\r\n    \"city\" : \"AMA\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company after update",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response property matches ADDRESS\", function () {\r",
											"    pm.expect(pm.response.json().address1).to.eql(pm.environment.get(\"COMPANY_ADDRESS\") + \"_UP\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company as company administrator",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update company from access token - change address back",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"ODPAutoTests_AMA_DO_NOT_DELETE\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{COMPANY_ORG_NUMBER}}\",\r\n    \"address1\": \"{{COMPANY_ADDRESS}}\",\r\n    \"postalCode\" : \"0504\",\r\n    \"city\" : \"AMA\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company change log",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains content and totalNumberOfRecords.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/changeLog?page=0&size=4",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"changeLog"
									],
									"query": [
										{
											"key": "page",
											"value": "0"
										},
										{
											"key": "size",
											"value": "4"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate created company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate created company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Update Client Company",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on AO Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"cloneClientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on AO Client Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update company on AO customer change name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}AOCustomer\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on AO Customer after update name on AO Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"cloneClientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\") + \"AOCustomer\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on Client Customer after update name on AO Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\") + \"AOCustomer\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update company on Client Customer change name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}ClientCustomer\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on AO Customer after update name on Client Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"cloneClientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\") + \"ClientCustomer\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on Client Customer after update name on Client Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\") + \"ClientCustomer\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update company on Client Customer restore name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update company on AO customer change description",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_descriptionAOCustomer\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on AO Customer after update description on AO Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"cloneClientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Company description returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().description).to.eql(\"test_descriptionAOCustomer\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on Client Customer after update description on AO Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Company description returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().description).to.eql(\"test_descriptionAOCustomer\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update company on Client Customer change description",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_descriptionClientCustomer\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on AO Customer after update description on Client Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"cloneClientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Company description returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().description).to.eql(\"test_descriptionClientCustomer\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company on Client Customer after update description on Client Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Company description returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().description).to.eql(\"test_descriptionClientCustomer\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Export client company change log",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/changeLog/export",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"changeLog",
										"export"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "4",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "contextTypeName,desc",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "actionType,eq,actionTypeGrantRole",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "contextTypeName,actionType",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company on AO customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"    pm.expect(pm.response.text()).to.include('messageParameters');\r",
											"});\r",
											"\r",
											"//3,\r",
											"pm.test(\"Company can not be found.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_NOT_FOUND');\r",
											"    pm.expect(pm.response.text()).to.include('There is no company with tenant id ' + pm.collectionVariables.get('clientCompanyTenantId'));\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Delete Company",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenantId: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get token for updating customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// //1. Check status code\r",
											"// pm.test(\"Status code is 200.\", function () {\r",
											"//     pm.response.to.have.status(200);\r",
											"// });\r",
											"\r",
											"// //2. Saving access token for updating customer\r",
											"// pm.collectionVariables.set(\"accessTokenForUpdatingCustomer\", pm.response.json().access_token)\r",
											"\r",
											"// //3.\r",
											"// pm.test(\"The response contains: access_token, token_type, scope, expires_in.\", function () {\r",
											"//     pm.expect(pm.response.text()).to.include('access_token');\r",
											"//     pm.expect(pm.response.text()).to.include('token_type');\r",
											"//     pm.expect(pm.response.text()).to.include('scope');\r",
											"//     pm.expect(pm.response.text()).to.include('expires_in');\r",
											"// });"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "grant_type",
											"value": "client_credentials",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "{{CLIENT_ID}}",
											"type": "text"
										},
										{
											"key": "client_secret",
											"value": "{{CLIENT_SECRET}}",
											"type": "text"
										},
										{
											"key": "scope",
											"value": "{{SCOPE}}",
											"type": "text"
										},
										{
											"key": "tenant_id",
											"value": "{{CUSTOMER_TENANT_ID_FOR_UPDATES}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
									"host": [
										"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Try to delete company from another customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company belongs to another customer.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_NOT_FOUND');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserForAnotherCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company - company already deleted",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Company not found!\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"COMPANY_NOT_FOUND\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create second company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{PAYROLL_SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Try to delete company after service activation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company has activated services and can not be deleted.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_DELETING_COMPANY');\r",
											"    pm.expect(pm.response.text()).to.include('Company has activated services and can not be deleted');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{PAYROLL_SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company with deactivated services",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company cannot be deleted because has services activated.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_DELETING_COMPANY');\r",
											"    pm.expect(pm.response.text()).to.include('Company had activated services and can not be deleted');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Delete Client Company from AO Customer",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete client company from AO Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after client company is deleted by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(0);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer client companies after client company is deleted by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(0);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/companies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"companies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete client company from Client Customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response body contains error message\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.code).to.be.eq('COMPANY_NOT_FOUND');\r",
											"    var message = \"There is no company with tenant id \" + pm.collectionVariables.get('clientCompanyTenantId');\r",
											"    pm.expect(jsonData.message).to.be.eq(message);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Activate/Deactivate Service",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - empty body",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - invalid service invariant key",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2. \r",
											"pm.test(\"Application type with invariant key: \" + (pm.environment.get(\"SERVICE_INVARIANT_KEY\")) + \"_invalid not found.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('APPLICATION_TYPE_NOT_FOUND_BY_INVARIANT_KEY');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}_invalid\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - not covered by subscription",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2. \r",
											"pm.test(\"Company service can not be activated because this service is not covered by subscription.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_ACTIVATING_COMPANY_SERVICE');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_NOT_COVERED_BY_SUBSCRIPTION}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var jsonData = pm.response.json().content;\r",
											"result = jsonData.filter(function (item) {\r",
											"    if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"        pm.collectionVariables.set(\"usedCompanies\", item.usedCompanies);\r",
											"    }\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Logistics is in service list\", function () {\r",
											"    var subApplicationFound = false;\r",
											"    var subAppParentFound = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"LOGISTICS_SERVICE_INVARIANT_KEY\")) {\r",
											"            subApplicationFound = true;\r",
											"            if (item.parentInvariantKey === pm.environment.get('FINACIALS_SERVICE_INVARIANT_KEY')) {\r",
											"                subAppParentFound = true;\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"    pm.expect(subApplicationFound).to.be.true;\r",
											"    pm.expect(subAppParentFound).to.be.true;\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been incresed.\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var increaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            increaseCompanyUsage = item.usedCompanies >= pm.collectionVariables.get('usedCompanies');\r",
											"        }\r",
											"    });\r",
											"    pm.expect(increaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Service is activated and when edited an changer is there\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    var found = false;\r",
											"    for (let service of content) {\r",
											"        \r",
											"        if(service.serviceInvariantKey == pm.environment.get('SERVICE_INVARIANT_KEY')){\r",
											"            found = true;\r",
											"            pm.expect(service.whenEdited).to.not.be.null;\r",
											"            pm.collectionVariables.set(\"whenEdited\", service.whenEdited);\r",
											"            pm.expect(service.userNameChangedBy).to.be.eq(pm.environment.get('USER_EMAIL'));\r",
											"            pm.expect(service.activated).to.be.true;\r",
											"        }\r",
											"    }\r",
											"    pm.expect(found).to.be.true;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company as company administrator",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - service already active",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company - empty body",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company - invalid service invariant key",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Application Type with invariant key: \" + (pm.environment.get(\"SERVICE_INVARIANT_KEY\")) + \"_invalid not found.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('APPLICATION_TYPE_NOT_FOUND_BY_INVARIANT_KEY');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}_invalid\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Deactivate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company after service deactivation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is deactivated\", function () {\r",
											"    // result = content.filter(item => item.name === 'Absence');\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.exist;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Services are sorted ascending by name\", () => {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    var _ = require('lodash')\r",
											"    var sortExpected = _.orderBy(jsonData.content, ['name'], ['asc']);\r",
											"    pm.expect(JSON.stringify(sortExpected)).to.eql(JSON.stringify(jsonData.content))\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Service is activated and when edited an changer is there\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    var found = false;\r",
											"    for (let service of content) {\r",
											"        \r",
											"        if(service.serviceInvariantKey == pm.environment.get('SERVICE_INVARIANT_KEY')){\r",
											"            found = true;\r",
											"            pm.expect(service.whenEdited).to.not.be.null;\r",
											"            var whenEdited = service.whenEdited;\r",
											"            pm.expect(whenEdited >= pm.collectionVariables.get('whenEdited')).to.be.true;\r",
											"            pm.expect(service.userNameChangedBy).to.be.eq(pm.environment.get('USER_EMAIL'));\r",
											"            pm.expect(service.activated).to.be.false;\r",
											"        }\r",
											"    }\r",
											"    pm.expect(found).to.be.true;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - customer is not parent of company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", () => {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([401,403,404])\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_DOES_NOT_BELONG_TO_CUSTOMER_TENANT_ID}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_DOES_NOT_BELONG_TO_CUSTOMER_TENANT_ID}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Reactivate service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company after service reactivation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Services are sorted ascending by name\", () => {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    var _ = require('lodash')\r",
											"    var sortExpected = _.orderBy(jsonData.content, ['name'], ['asc']);\r",
											"    pm.expect(JSON.stringify(sortExpected)).to.eql(JSON.stringify(jsonData.content))\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company - customer is not parent of company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", () => {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([401,403,404])\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_DOES_NOT_BELONG_TO_CUSTOMER_TENANT_ID}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_DOES_NOT_BELONG_TO_CUSTOMER_TENANT_ID}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been decrease\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var increaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            increaseCompanyUsage = item.usedCompanies <= pm.collectionVariables.get('usedCompanies');\r",
											"        }\r",
											"    });\r",
											"    pm.expect(increaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company after service deactivation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is deactivated\", function () {\r",
											"    // result = content.filter(item => item.name === 'Absence');\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.exist;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Services are sorted ascending by name\", () => {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    var _ = require('lodash')\r",
											"    var sortExpected = _.orderBy(jsonData.content, ['name'], ['asc']);\r",
											"    pm.expect(JSON.stringify(sortExpected)).to.eql(JSON.stringify(jsonData.content))\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Activate/Deactivate Service as company admin",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var jsonData = pm.response.json().content;\r",
											"result = jsonData.filter(function (item) {\r",
											"    if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"        pm.collectionVariables.set(\"usedCompanies\", item.usedCompanies);\r",
											"    }\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Logistics is in service list\", function () {\r",
											"    var subApplicationFound = false;\r",
											"    var subAppParentFound = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"LOGISTICS_SERVICE_INVARIANT_KEY\")) {\r",
											"            subApplicationFound = true;\r",
											"            if (item.parentInvariantKey === pm.environment.get('FINACIALS_SERVICE_INVARIANT_KEY')) {\r",
											"                subAppParentFound = true;\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"    pm.expect(subApplicationFound).to.be.true;\r",
											"    pm.expect(subAppParentFound).to.be.true;\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for different company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been incresed.\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var increaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            increaseCompanyUsage = item.usedCompanies >= pm.collectionVariables.get('usedCompanies');\r",
											"        }\r",
											"    });\r",
											"    pm.expect(increaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company as company administrator",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Deactivate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for different company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Deactivate service for company returns status 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company after service deactivation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is deactivated\", function () {\r",
											"    // result = content.filter(item => item.name === 'Absence');\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.exist;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Services are sorted ascending by name\", () => {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    var _ = require('lodash')\r",
											"    var sortExpected = _.orderBy(jsonData.content, ['name'], ['asc']);\r",
											"    console.log(JSON.stringify(sortExpected))\r",
											"    console.log(JSON.stringify(jsonData.content))\r",
											"    pm.expect(JSON.stringify(sortExpected)).to.eql(JSON.stringify(jsonData.content))\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Activate/Deactivate Service on AO client company",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - empty body",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - invalid service invariant key",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2. \r",
											"pm.test(\"Application type with invariant key: \" + (pm.environment.get(\"SERVICE_INVARIANT_KEY\")) + \"_invalid not found.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('APPLICATION_TYPE_NOT_FOUND_BY_INVARIANT_KEY');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}_invalid\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - not covered by subscription",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2. \r",
											"pm.test(\"Company service can not be activated because this service is not covered by subscription.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_ACTIVATING_COMPANY_SERVICE');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_NOT_COVERED_BY_SUBSCRIPTION}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var jsonData = pm.response.json().content;\r",
											"result = jsonData.filter(function (item) {\r",
											"    if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"        pm.collectionVariables.set(\"usedCompanies\", item.usedCompanies);\r",
											"    }\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Logistics in in service list\", function () {\r",
											"    var subApplicationFound = false;\r",
											"    var subAppParentFound = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"LOGISTICS_SERVICE_INVARIANT_KEY\")) {\r",
											"            subApplicationFound = true;\r",
											"            if (item.parentInvariantKey === pm.environment.get('FINACIALS_SERVICE_INVARIANT_KEY')) {\r",
											"                subAppParentFound = true;\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"    pm.expect(subApplicationFound).to.be.true;\r",
											"    pm.expect(subAppParentFound).to.be.true;\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been increse\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var increaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            increaseCompanyUsage = item.usedCompanies >= pm.collectionVariables.get('usedCompanies');\r",
											"            console.log(\"increase company usage found\");\r",
											"        }\r",
											"    });\r",
											"    pm.expect(increaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - service already active",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company - empty body",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company - invalid service invariant key",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Application Type with invariant key: \" + (pm.environment.get(\"SERVICE_INVARIANT_KEY\")) + \"_invalid not found.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('APPLICATION_TYPE_NOT_FOUND_BY_INVARIANT_KEY');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}_invalid\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Deactivate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company after service deactivation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is deactivated\", function () {\r",
											"    // result = content.filter(item => item.name === 'Absence');\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.exist;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Services are sorted ascending by name\", () => {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    var _ = require('lodash')\r",
											"    var sortExpected = _.orderBy(jsonData.content, ['name'], ['asc']);\r",
											"    console.log(JSON.stringify(sortExpected))\r",
											"    console.log(JSON.stringify(jsonData.content))\r",
											"    pm.expect(JSON.stringify(sortExpected)).to.eql(JSON.stringify(jsonData.content))\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service - customer is not parent of company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", () => {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([401,403,404])\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_DOES_NOT_BELONG_TO_CUSTOMER_TENANT_ID}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_DOES_NOT_BELONG_TO_CUSTOMER_TENANT_ID}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Reactivate service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company after service reactivation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Services are sorted ascending by name\", () => {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    var _ = require('lodash')\r",
											"    var sortExpected = _.orderBy(jsonData.content, ['name'], ['asc']);\r",
											"    console.log(JSON.stringify(sortExpected))\r",
											"    console.log(JSON.stringify(jsonData.content))\r",
											"    pm.expect(JSON.stringify(sortExpected)).to.eql(JSON.stringify(jsonData.content))\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company - customer is not parent of company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", () => {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([401,403,404])\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_DOES_NOT_BELONG_TO_CUSTOMER_TENANT_ID}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_DOES_NOT_BELONG_TO_CUSTOMER_TENANT_ID}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been decrease\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var increaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            console.log(item);\r",
											"            increaseCompanyUsage = item.usedCompanies <= pm.collectionVariables.get('usedCompanies');\r",
											"        }\r",
											"    });\r",
											"    pm.expect(increaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company after service deactivation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is deactivated\", function () {\r",
											"    // result = content.filter(item => item.name === 'Absence');\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.exist;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Services are sorted ascending by name\", () => {\r",
											"    jsonData = JSON.parse(responseBody)\r",
											"    var _ = require('lodash')\r",
											"    var sortExpected = _.orderBy(jsonData.content, ['name'], ['asc']);\r",
											"    console.log(JSON.stringify(sortExpected))\r",
											"    console.log(JSON.stringify(jsonData.content))\r",
											"    pm.expect(JSON.stringify(sortExpected)).to.eql(JSON.stringify(jsonData.content))\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company on AO customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"    pm.expect(pm.response.text()).to.include('messageParameters');\r",
											"});\r",
											"\r",
											"//3,\r",
											"pm.test(\"Company can not be found.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_NOT_FOUND');\r",
											"    pm.expect(pm.response.text()).to.include('There is no company with tenant id ' + pm.collectionVariables.get('clientCompanyTenantId'));\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company on AO customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"    pm.expect(pm.response.text()).to.include('messageParameters');\r",
											"});\r",
											"\r",
											"//3,\r",
											"pm.test(\"Company can not be found.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_NOT_FOUND');\r",
											"    pm.expect(pm.response.text()).to.include('There is no company with tenant id ' + pm.collectionVariables.get('clientCompanyTenantId'));\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company details company still active on AO customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.name).to.be.eq(pm.collectionVariables.get('clientCompanyName'));\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"    pm.expect(jsonData.status).to.be.eq('ACTIVATED');\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company details company still active on client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.name).to.be.eq(pm.collectionVariables.get('clientCompanyName'));\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('clientCompanyTenantId'));\r",
											"    pm.expect(jsonData.status).to.be.eq('ACTIVATED');\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company on client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company details company deactivated on AO customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.name).to.be.eq(pm.collectionVariables.get('clientCompanyName'));\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"    pm.expect(jsonData.status).to.be.eq('DEACTIVATED');\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company details company deactivated on client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.name).to.be.eq(pm.collectionVariables.get('clientCompanyName'));\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('clientCompanyTenantId'));\r",
											"    pm.expect(jsonData.status).to.be.eq('DEACTIVATED');\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate company on AO customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"    pm.expect(pm.response.text()).to.include('messageParameters');\r",
											"});\r",
											"\r",
											"//3,\r",
											"pm.test(\"Company can not be found.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_NOT_FOUND');\r",
											"    pm.expect(pm.response.text()).to.include('There is no company with tenant id ' + pm.collectionVariables.get('clientCompanyTenantId'));\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n\r\n    \"roleReassignOnReactivate\": false,\r\n    \"serviceReactivation\" : false\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company on client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company details company terminated on AO customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.name).to.be.eq(pm.collectionVariables.get('clientCompanyName'));\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"    pm.expect(jsonData.status).to.be.eq('TERMINATED');\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company details company terminated on client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.name).to.be.eq(pm.collectionVariables.get('clientCompanyName'));\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('clientCompanyTenantId'));\r",
											"    pm.expect(jsonData.status).to.be.eq('TERMINATED');\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Change client company status to deactivated-activated-terminated from AO Customer",
					"item": [
						{
							"name": "Create new client company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody)\r",
											"var companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"postalCode\": \"1234\",\r\n    \"telephone\": \"123456789\",\r\n    \"emailAddress\":\"email@email.com\",\r\n    \"description\": \"description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate first service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate second service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate first service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Deactivate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"name = jsonData.name\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey);\r",
											"pm.collectionVariables.set(\"companyGroupName\", name);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is ACTIVE\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('ACTIVATED');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: tenantId, name, organizationNumber.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('customerName');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Check total number of records\", function () {\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(1);\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company name and tenant matches\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.content[0].tenantId).to.be.eql(pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"    pm.expect(jsonData.content[0].name).to.be.eql(pm.collectionVariables.get('clientCompanyName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/clientMembers",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"clientMembers"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.serviceInvariantKey === pm.environment.get(\"SERVICE2_INVARIANT_KEY\") });\r",
											"    pm.expect(result[0].serviceInvariantKey).to.eql(pm.environment.get(\"SERVICE2_INVARIANT_KEY\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new user",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"connectUserId = jsonData.connectUserId\r",
											"userEmail = encodeURIComponent(jsonData.userEmail)\r",
											"firstName = jsonData.firstName\r",
											"lastName = jsonData.lastName\r",
											"pm.collectionVariables.set(\"connectUserId\", connectUserId);\r",
											"pm.collectionVariables.set(\"userEmail\", userEmail);\r",
											"pm.collectionVariables.set(\"firstName\", firstName);\r",
											"pm.collectionVariables.set(\"lastName\", lastName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company role to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{cloneClientCompanyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignments for user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//4. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"The response body contains 2 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey, roleInvariantKey).to.eql(pm.environment.get(\"ROLE2_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(true)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/clientCompanies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{cloneClientCompanyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"clientCompanies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{cloneClientCompanyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company using another customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 403\", function () {    \r",
											"    pm.expect(pm.response.code).to.be.oneOf([403,404])\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserForAnotherCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company again",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The access token does not allow access to the requested company\" , function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(pm.response.text()).to.include('Current company status is DEACTIVATED an it cannot be changed to DEACTIVATED');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignments for user after service is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//4. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"The response body contains 2 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey, roleInvariantKey).to.eql(pm.environment.get(\"ROLE2_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(false)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/clientCompanies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{cloneClientCompanyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"clientCompanies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{cloneClientCompanyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is ACTIVE\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('DEACTIVATED');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members company is dectivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains no element.\", function () {\r",
											"    pm.expect(pm.response.json().content).to.be.an('array').that.is.empty;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Check total number of records\", function () {\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(0);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/clientMembers",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"clientMembers"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate company reactivate service and roles",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceReactivation\": true,\r\n    \"roleReassignOnReactivate\": true\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is ACTIVE\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('ACTIVATED');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service that was directly deactivated is still deactivated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    var result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.exist;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Service that was deactivated is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    var result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignments for user after company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//4. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"The response body contains 2 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey, roleInvariantKey).to.eql(pm.environment.get(\"ROLE2_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(true)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/clientCompanies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{cloneClientCompanyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"clientCompanies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{cloneClientCompanyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate company reactivate only service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceReactivation\": true,\r\n    \"roleReassignOnReactivate\": false\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company is activated and roles are not restored",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service that was directly deactivated is still deactivated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    var result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.exist;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Service that was deactivated is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    var result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignments for user after company is activated with no roles restored",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//4. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"The response body contains 2 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey, roleInvariantKey).to.eql(pm.environment.get(\"ROLE2_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(false)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/clientCompanies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{cloneClientCompanyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"clientCompanies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{cloneClientCompanyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is terminated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is TERMINATED\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('TERMINATED');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Company tenant id matches\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users",
										"{{connectUserId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Change client company status to terminated from AO Customer no service ever activated",
					"item": [
						{
							"name": "Create new client company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody)\r",
											"var companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"postalCode\": \"1234\",\r\n    \"telephone\": \"123456789\",\r\n    \"emailAddress\":\"email@email.com\",\r\n    \"description\": \"description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is active",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is TERMINATED\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('ACTIVATED');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Company tenant id matches\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"name = jsonData.name\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey);\r",
											"pm.collectionVariables.set(\"companyGroupName\", name);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is TERMINATED\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('DEACTIVATED');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Company tenant id matches\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign client company to CG , company is deactivated",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//1.\r",
											"pm.test(\"Company can not be add to CG because is not active\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.code).to.be.eq('ERROR_UPDATING_COMPANY');\r",
											"    var errorMessage = \"Company with tenant id \" + pm.collectionVariables.get('cloneClientCompanyTenantId') + \" can not be added to a company group because it is not active.\"\r",
											"    pm.expect(jsonData.message).to.be.eq(errorMessage);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is terminated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is TERMINATED\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('DELETED');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Company tenant id matches\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.tenantId).to.be.eq(pm.collectionVariables.get('cloneClientCompanyTenantId'));\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign client company to CG, company is terminated",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//1.\r",
											"pm.test(\"Company can not be add to CG because is not active\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.code).to.be.eq('ERROR_UPDATING_COMPANY');\r",
											"    var errorMessage = \"Company with tenant id \" + pm.collectionVariables.get('cloneClientCompanyTenantId') + \" can not be added to a company group because it is not active.\"\r",
											"    pm.expect(jsonData.message).to.be.eq(errorMessage);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members company is not activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check total number of records\", function () {\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(0);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/clientMembers",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"clientMembers"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Enable or Disable role assignment emails for company",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is true.\", function () {\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Disable role assignment notifications",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/disableInformUsersAboutRoleAssignmentUpdates",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"disableInformUsersAboutRoleAssignmentUpdates"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - role assignment emails are disabled",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role assignment emails are disabled.\", function () {\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(false);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Enable role assignment notifications",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/enableInformUsersAboutRoleAssignmentUpdates",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"enableInformUsersAboutRoleAssignmentUpdates"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - role assignmanet emails are enabled",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role assignment emails are enabled.\", function () {\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Enable or Disable role assignment emails for company as company admin",
					"item": [
						{
							"name": "Disable role assignment notifications",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/disableInformUsersAboutRoleAssignmentUpdates",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"disableInformUsersAboutRoleAssignmentUpdates"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - role assignment emails are disabled",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Role assignment emails are disabled.\", function () {\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(false);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Enable role assignment notifications",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/enableInformUsersAboutRoleAssignmentUpdates",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"enableInformUsersAboutRoleAssignmentUpdates"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company - role assignmanet emails are enabled",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Role assignment emails are enabled.\", function () {\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Company details status",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody)\r",
											"var companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"postalCode\": \"1234\",\r\n    \"telephone\": \"123456789\",\r\n    \"emailAddress\":\"email@email.com\",\r\n    \"description\": \"description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"    pm.expect(pm.response.text()).to.include('status');\r",
											"    pm.expect(pm.response.text()).to.include('activatedServices');\r",
											"    pm.expect(pm.response.text()).to.include('deactivatedServices');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"companyName\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate first service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company after company service activate",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"    pm.expect(pm.response.text()).to.include('status');\r",
											"    pm.expect(pm.response.text()).to.include('activatedServices');\r",
											"    pm.expect(pm.response.text()).to.include('deactivatedServices');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"companyName\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.true;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate second service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{PAYROLL_SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate first service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company after company service is deactivate",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"    pm.expect(pm.response.text()).to.include('status');\r",
											"    pm.expect(pm.response.text()).to.include('activatedServices');\r",
											"    pm.expect(pm.response.text()).to.include('deactivatedServices');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"companyName\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.true;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.true;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate second service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{PAYROLL_SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company after all company services are deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('address1');\r",
											"    pm.expect(pm.response.text()).to.include('city');\r",
											"    pm.expect(pm.response.text()).to.include('postalCode');\r",
											"    pm.expect(pm.response.text()).to.include('telephone');\r",
											"    pm.expect(pm.response.text()).to.include('description');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"    pm.expect(pm.response.text()).to.include('status');\r",
											"    pm.expect(pm.response.text()).to.include('activatedServices');\r",
											"    pm.expect(pm.response.text()).to.include('deactivatedServices');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response property 'country code' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().countryCode).to.eql(pm.environment.get(\"COUNTRY_CODE\"));\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Response property 'company tenant id' matches environment variable.\", function () {\r",
											"    pm.expect(pm.response.json().tenantId).to.eql(pm.collectionVariables.get(\"companyTenantId\"));\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Company name returned in the response matches the one previously created.\", function () {\r",
											"    pm.expect(pm.response.json().name).to.eql(pm.collectionVariables.get(\"companyName\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.true;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.true;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Changes on deactivated company",
					"item": [
						{
							"name": "Update deactivated company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var response = pm.response.json();\r",
											"pm.test(\"Error code is desired one.\", function () {\r",
											"    pm.expect(response.code).to.be.eq('ERROR_UPDATING_COMPANY');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Error is desired one.\", function () {\r",
											"    pm.expect(response.message).to.be.eq('Company with tenant id ' + pm.environment.get('DEACTIVATED_COMPANY_TENANT_ID') + ' can not be updated because it is not active.');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}_UP\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}_UP\",\r\n    \"address1\": \"test_address1_UP\",\r\n    \"city\": \"test_city_UP\",\r\n    \"postalCode\": \"2849242_UP\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{DEACTIVATED_COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{DEACTIVATED_COMPANY_TENANT_ID}}"
									],
									"query": [
										{
											"key": "tenantId",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Enable inform users about role assignment emails",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var response = pm.response.json();\r",
											"pm.test(\"Error code is desired one.\", function () {\r",
											"    pm.expect(response.code).to.be.eq('ERROR_UPDATING_COMPANY');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Error is desired one.\", function () {\r",
											"    pm.expect(response.message).to.be.eq('For company with tenant id ' + pm.environment.get('DEACTIVATED_COMPANY_TENANT_ID') + ' inform users about role assignments can not be changed because it is not active.');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{DEACTIVATED_COMPANY_TENANT_ID}}/enableInformUsersAboutRoleAssignmentUpdates",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{DEACTIVATED_COMPANY_TENANT_ID}}",
										"enableInformUsersAboutRoleAssignmentUpdates"
									]
								}
							},
							"response": []
						},
						{
							"name": "Disable inform users about role assignment emails",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var response = pm.response.json();\r",
											"pm.test(\"Error code is desired one.\", function () {\r",
											"    pm.expect(response.code).to.be.eq('ERROR_UPDATING_COMPANY');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Error is desired one.\", function () {\r",
											"    pm.expect(response.message).to.be.eq('For company with tenant id ' + pm.environment.get('DEACTIVATED_COMPANY_TENANT_ID') + ' inform users about role assignments can not be changed because it is not active.');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{DEACTIVATED_COMPANY_TENANT_ID}}/disableInformUsersAboutRoleAssignmentUpdates",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{DEACTIVATED_COMPANY_TENANT_ID}}",
										"disableInformUsersAboutRoleAssignmentUpdates"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign deactivated company to CG",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var response = pm.response.json();\r",
											"pm.test(\"Error code is desired one.\", function () {\r",
											"    pm.expect(response.code).to.be.eq('ERROR_UPDATING_COMPANY');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Error is desired one.\", function () {\r",
											"    pm.expect(response.message).to.be.eq('Company with tenant id ' + pm.environment.get('DEACTIVATED_COMPANY_TENANT_ID') + ' can not be added to a company group because it is not active.');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{DEACTIVATED_COMPANY_TENANT_ID}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{DEACTIVATED_COMPANY_TENANT_ID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new user",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"connectUserId = jsonData.connectUserId\r",
											"userEmail = jsonData.userEmail\r",
											"pm.collectionVariables.set(\"connectUserId\", connectUserId);\r",
											"pm.collectionVariables.set(\"userEmail\", userEmail);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign role to deactivated company for user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"var response = pm.response.json();\r",
											"//2.\r",
											"pm.test(\"Error code is desired one.\", function () {\r",
											"   pm.expect(response.code).to.be.eq('ERROR_UPDATING_COMPANY'); \r",
											"});   "
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{DEACTIVATED_COMPANY_TENANT_ID}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users",
										"{{connectUserId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create user group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//save connectUserId and userEmail value from response body to collection variables\r",
											"jsonData = JSON.parse(responseBody);\r",
											"userGroupName = jsonData.name;\r",
											"idUserGroup = jsonData.idUserGroup;\r",
											"userGroupInvariantKey = jsonData.userGroupInvariantKey;\r",
											"pm.collectionVariables.set(\"userGroupName\", userGroupName);\r",
											"pm.collectionVariables.set(\"idUserGroup\", idUserGroup);\r",
											"pm.collectionVariables.set(\"userGroupInvariantKey\", userGroupInvariantKey);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"UG+{{randomDataGenerator}}\",\r\n    \"parentTenantId\": \"{{TENANT_ID_FOR_COMPANY_CREATION}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign role to deactivated company for user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(pm.response.text());\r",
											"jobId = jsonData.jobId;\r",
											"pm.collectionVariables.set(\"jobId\", jobId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE_INVARIANT_KEY}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"tenantId\":\"{{DEACTIVATED_COMPANY_TENANT_ID}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Check role assignment job is completed",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (!pm.collectionVariables.get(\"tries\")) {\r",
											"    pm.collectionVariables.set(\"tries\", 1);\r",
											"}\r",
											"\r",
											"const jsonData = pm.response.json();\r",
											"console.log(\"Try # \" + pm.collectionVariables.get(\"tries\"));\r",
											"\r",
											"if (((jsonData.status == \"queued\") && (pm.collectionVariables.get(\"tries\") < (pm.collectionVariables.get(\"maxNumberOfTries\"))))){\r",
											"    console.log(\"Job is not yet COMPLETED. Retrying...\" + jsonData)\r",
											"    const tries = parseInt(pm.collectionVariables.get(\"tries\"), 10);\r",
											"    pm.collectionVariables.set(\"tries\", tries + 1);\r",
											"    setTimeout(function () { }, (pm.collectionVariables.get(\"sleepBetweenTries\")));\r",
											"    postman.setNextRequest(request.name);\r",
											"    console.log(\"request name \" + request.name);\r",
											"\r",
											"} else {\r",
											"    pm.collectionVariables.unset('tries');\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/roleAssignmentJobs/{{jobId}}?skipSpinner=true",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleAssignmentJobs",
										"{{jobId}}"
									],
									"query": [
										{
											"key": "skipSpinner",
											"value": "true"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Check assign role to deactivated company for user group error report",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/roleAssignmentJobs/{{jobId}}/failureReport",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleAssignmentJobs",
										"{{jobId}}",
										"failureReport"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/userGroups/{{userGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"userGroups",
										"{{userGroupInvariantKey}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var response = pm.response.json();\r",
											"pm.test(\"Error code is desired one.\", function () {\r",
											"    pm.expect(response.code).to.be.eq('ERROR_UPDATING_COMPANY');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Error is desired one.\", function () {\r",
											"    pm.expect(response.message).to.be.eq('For company with tenant id ' + pm.environment.get('DEACTIVATED_COMPANY_TENANT_ID') + ' a service can not be activated because it is not active.');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{DEACTIVATED_COMPANY_TENANT_ID}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{DEACTIVATED_COMPANY_TENANT_ID}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"var response = pm.response.json();\r",
											"pm.test(\"Error code is desired one.\", function () {\r",
											"    pm.expect(response.code).to.be.eq('ERROR_UPDATING_COMPANY');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Error is desired one.\", function () {\r",
											"    pm.expect(response.message).to.be.eq('For company with tenant id ' + pm.environment.get('DEACTIVATED_COMPANY_TENANT_ID') + ' a service can not be deactivated because it is not active.');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{DEACTIVATED_COMPANY_TENANT_ID}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{DEACTIVATED_COMPANY_TENANT_ID}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Check company service activation",
					"item": [
						{
							"name": "Service activation through user/user group role assignment to company",
							"item": [
								{
									"name": "Create company",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// get a random value\r",
													"const RandomDataGenerator = Date.now()\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(responseBody)\r",
													"companyTenantId = jsonData.tenantId\r",
													"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
													"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"The response has all properties\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('name');\r",
													"    pm.expect(pm.response.text()).to.include('tenantId');\r",
													"    pm.expect(pm.response.text()).to.include('countryCode');\r",
													"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
													"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
													"});\r",
													"\r",
													"//4.\r",
													"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
													"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
													"});\r",
													"\r",
													"//5.\r",
													"pm.test(\"DemoCompany is set to false by default\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
													"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companies",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create new user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"//save connectUserId and userEmail value from response body to collection variables\r",
													"jsonData = JSON.parse(responseBody)\r",
													"connectUserId = jsonData.connectUserId\r",
													"userEmail = jsonData.userEmail\r",
													"pm.collectionVariables.set(\"connectUserId\", connectUserId)\r",
													"pm.collectionVariables.set(\"userEmail\", userEmail)\r",
													"\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Body matches string\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('connectUserId');\r",
													"    pm.expect(pm.response.text()).to.include('userEmail');\r",
													"    pm.expect(pm.response.text()).to.include('firstName');\r",
													"    pm.expect(pm.response.text()).to.include('lastName');\r",
													"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
													"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/users",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create user group",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"//save connectUserId and userEmail value from response body to collection variables\r",
													"jsonData = JSON.parse(responseBody);\r",
													"idUserGroup = jsonData.idUserGroup;\r",
													"userGroupInvariantKey = jsonData.userGroupInvariantKey;\r",
													"userGroupName = jsonData.name;\r",
													"pm.collectionVariables.set(\"idUserGroup\", idUserGroup);\r",
													"pm.collectionVariables.set(\"userGroupInvariantKey\", userGroupInvariantKey);\r",
													"pm.collectionVariables.set(\"userGroupName\", userGroupName);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"UG+{{randomDataGenerator}}\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/userGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"userGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company role 1 to user",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/serviceAccess/users",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"serviceAccess",
												"users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company role 2 to UG",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(pm.response.text());\r",
													"jobId = jsonData.jobId;\r",
													"pm.collectionVariables.set(\"jobId\", jobId);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n ]"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"serviceAccess",
												"userGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check user group role assignment job is completed",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (!pm.collectionVariables.get(\"tries\")) {\r",
													"    pm.collectionVariables.set(\"tries\", 1);\r",
													"}\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"console.log(\"Try # \" + pm.collectionVariables.get(\"tries\"));\r",
													"\r",
													"if (((jsonData.status == \"queued\") && (pm.collectionVariables.get(\"tries\") < (pm.collectionVariables.get(\"maxNumberOfTries\"))))){\r",
													"    console.log(\"Job is not yet COMPLETED. Retrying...\" + jsonData)\r",
													"    const tries = parseInt(pm.collectionVariables.get(\"tries\"), 10);\r",
													"    pm.collectionVariables.set(\"tries\", tries + 1);\r",
													"    setTimeout(function () { }, (pm.collectionVariables.get(\"sleepBetweenTries\")));\r",
													"    postman.setNextRequest(request.name);\r",
													"    console.log(\"request name \" + request.name);\r",
													"\r",
													"} else {\r",
													"    pm.collectionVariables.unset('tries');\r",
													"}"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/roleAssignmentJobs/{{jobId}}?skipSpinner=true",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleAssignmentJobs",
												"{{jobId}}"
											],
											"query": [
												{
													"key": "skipSpinner",
													"value": "true"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get services for company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Get active service for company returns status 200\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Service 1 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Service 2 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"services"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get services for company - subscriber viewer",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Get active service for company returns status 200\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Service 1 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Service 2 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{distributorAccessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"url": {
											"raw": "{{BASE_URL}}/v1/distributors/customers/{{CUSTOMER_TENANT_ID}}/companies/{{companyTenantId}}/services",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"distributors",
												"customers",
												"{{CUSTOMER_TENANT_ID}}",
												"companies",
												"{{companyTenantId}}",
												"services"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 202.\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"users",
												"{{connectUserId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user group",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/userGroups/{{userGroupInvariantKey}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"userGroups",
												"{{userGroupInvariantKey}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Deactivate company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "PATCH",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"deactivate"
											]
										}
									},
									"response": []
								},
								{
									"name": "Terminate company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "PATCH",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"terminate"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Service activation through user/user group role group assignment to company",
							"item": [
								{
									"name": "Add role group 1 for company",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// get a random value\r",
													"const RandomDataGenerator = Date.now()\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var roleInvariantKey = JSON.parse(responseBody).roleInvariantKey;\r",
													"pm.collectionVariables.set(\"roleGroupInvariantKeyForCompany1\", roleInvariantKey);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Body matches string\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('name');\r",
													"    pm.expect(pm.response.text()).to.include('roleInvariantKey');\r",
													"    pm.expect(pm.response.text()).to.include('description');\r",
													"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
													"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches description\", function () {\r",
													"    pm.expect(pm.response.json().description).to.eql(\"description+\" + pm.collectionVariables.get(\"randomDataGenerator\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"displayName\":\"RG+++{{randomDataGenerator}}\",\r\n    \"description\": \"description+{{randomDataGenerator}}\"}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/company",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"company"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add role group 2 for company",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// get a random value\r",
													"const RandomDataGenerator = Date.now()\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var roleInvariantKey = JSON.parse(responseBody).roleInvariantKey;\r",
													"pm.collectionVariables.set(\"roleGroupInvariantKeyForCompany2\", roleInvariantKey);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Body matches string\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('name');\r",
													"    pm.expect(pm.response.text()).to.include('roleInvariantKey');\r",
													"    pm.expect(pm.response.text()).to.include('description');\r",
													"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
													"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches description\", function () {\r",
													"    pm.expect(pm.response.json().description).to.eql(\"description+\" + pm.collectionVariables.get(\"randomDataGenerator\"));\r",
													"});\r",
													"\r",
													"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"displayName\":\"RG+++{{randomDataGenerator}}\",\r\n    \"description\": \"description+{{randomDataGenerator}}\"}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/company",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"company"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create company",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// get a random value\r",
													"const RandomDataGenerator = Date.now()\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(responseBody)\r",
													"companyTenantId = jsonData.tenantId\r",
													"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
													"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"The response has all properties\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('name');\r",
													"    pm.expect(pm.response.text()).to.include('tenantId');\r",
													"    pm.expect(pm.response.text()).to.include('countryCode');\r",
													"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
													"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
													"});\r",
													"\r",
													"//4.\r",
													"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
													"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
													"});\r",
													"\r",
													"//5.\r",
													"pm.test(\"DemoCompany is set to false by default\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
													"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companies",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create new user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"//save connectUserId and userEmail value from response body to collection variables\r",
													"jsonData = JSON.parse(responseBody)\r",
													"connectUserId = jsonData.connectUserId\r",
													"userEmail = jsonData.userEmail\r",
													"pm.collectionVariables.set(\"connectUserId\", connectUserId)\r",
													"pm.collectionVariables.set(\"userEmail\", userEmail)\r",
													"\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Body matches string\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('connectUserId');\r",
													"    pm.expect(pm.response.text()).to.include('userEmail');\r",
													"    pm.expect(pm.response.text()).to.include('firstName');\r",
													"    pm.expect(pm.response.text()).to.include('lastName');\r",
													"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
													"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/users",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create user group",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"//save connectUserId and userEmail value from response body to collection variables\r",
													"jsonData = JSON.parse(responseBody);\r",
													"idUserGroup = jsonData.idUserGroup;\r",
													"userGroupInvariantKey = jsonData.userGroupInvariantKey;\r",
													"userGroupName = jsonData.name;\r",
													"pm.collectionVariables.set(\"idUserGroup\", idUserGroup);\r",
													"pm.collectionVariables.set(\"userGroupInvariantKey\", userGroupInvariantKey);\r",
													"pm.collectionVariables.set(\"userGroupName\", userGroupName);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"UG+{{randomDataGenerator}}\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/userGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"userGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add role 1 to role  group 1",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code is 200.\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}/roles/{{ROLE_INVARIANT_KEY}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"{{roleGroupInvariantKeyForCompany1}}",
												"roles",
												"{{ROLE_INVARIANT_KEY}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add role 2 to role  group 2",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code is 200.\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany2}}/roles/{{ROLE2_INVARIANT_KEY}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"{{roleGroupInvariantKeyForCompany2}}",
												"roles",
												"{{ROLE2_INVARIANT_KEY}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company role group 1 to user",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/serviceAccess/users",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"serviceAccess",
												"users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company role group 2 to UG",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(pm.response.text());\r",
													"jobId = jsonData.jobId;\r",
													"pm.collectionVariables.set(\"jobId\", jobId);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});\r",
													"\r",
													"\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany2}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"serviceAccess",
												"userGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get services for company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Get active service for company returns status 200\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Service 1 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Service 2 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													" setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"services"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete role group 1 for company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code is 204.\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"{{roleGroupInvariantKeyForCompany1}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete role group 2 for company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code is 204.\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany2}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"{{roleGroupInvariantKeyForCompany2}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 202.\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"users",
												"{{connectUserId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user group",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/userGroups/{{userGroupInvariantKey}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"userGroups",
												"{{userGroupInvariantKey}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Deactivate company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "PATCH",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"deactivate"
											]
										}
									},
									"response": []
								},
								{
									"name": "Terminate company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "PATCH",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"terminate"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Service activation through user/user group role assignment to company group",
							"item": [
								{
									"name": "Create company",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// get a random value\r",
													"const RandomDataGenerator = Date.now()\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(responseBody)\r",
													"companyTenantId = jsonData.tenantId\r",
													"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
													"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"The response has all properties\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('name');\r",
													"    pm.expect(pm.response.text()).to.include('tenantId');\r",
													"    pm.expect(pm.response.text()).to.include('countryCode');\r",
													"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
													"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
													"});\r",
													"\r",
													"//4.\r",
													"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
													"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
													"});\r",
													"\r",
													"//5.\r",
													"pm.test(\"DemoCompany is set to false by default\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
													"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companies",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create new company group",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const RandomDataGenerator = Date.now();\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
												],
												"type": "text/javascript",
												"packages": {}
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(responseBody)\r",
													"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
													"name = jsonData.name\r",
													"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey);\r",
													"pm.collectionVariables.set(\"companyGroupName\", name);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companyGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companyGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company to CG",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const RandomDataGenerator = Date.now();\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
												],
												"type": "text/javascript",
												"packages": {}
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200.\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companyGroups",
												"{{companyGroupInvariantKey}}",
												"companies",
												"{{companyTenantId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create new user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"//save connectUserId and userEmail value from response body to collection variables\r",
													"jsonData = JSON.parse(responseBody)\r",
													"connectUserId = jsonData.connectUserId\r",
													"userEmail = jsonData.userEmail\r",
													"pm.collectionVariables.set(\"connectUserId\", connectUserId)\r",
													"pm.collectionVariables.set(\"userEmail\", userEmail)\r",
													"\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Body matches string\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('connectUserId');\r",
													"    pm.expect(pm.response.text()).to.include('userEmail');\r",
													"    pm.expect(pm.response.text()).to.include('firstName');\r",
													"    pm.expect(pm.response.text()).to.include('lastName');\r",
													"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
													"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/users",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create user group",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"//save connectUserId and userEmail value from response body to collection variables\r",
													"jsonData = JSON.parse(responseBody);\r",
													"idUserGroup = jsonData.idUserGroup;\r",
													"userGroupInvariantKey = jsonData.userGroupInvariantKey;\r",
													"userGroupName = jsonData.name;\r",
													"pm.collectionVariables.set(\"idUserGroup\", idUserGroup);\r",
													"pm.collectionVariables.set(\"userGroupInvariantKey\", userGroupInvariantKey);\r",
													"pm.collectionVariables.set(\"userGroupName\", userGroupName);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"UG+{{randomDataGenerator}}\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/userGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"userGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company group role 1 to user",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE_INVARIANT_KEY}}\",\r\n        \"connectUserId\": \"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/serviceAccess/users",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"serviceAccess",
												"users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company group role 2 to user group",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"serviceAccess",
												"userGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check group role assignment job is completed",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (!pm.collectionVariables.get(\"tries\")) {\r",
													"    pm.collectionVariables.set(\"tries\", 1);\r",
													"}\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"console.log(\"Try # \" + pm.collectionVariables.get(\"tries\"));\r",
													"\r",
													"if (((jsonData.status == \"queued\") && (pm.collectionVariables.get(\"tries\") < (pm.collectionVariables.get(\"maxNumberOfTries\"))))){\r",
													"    console.log(\"Job is not yet COMPLETED. Retrying...\" + jsonData)\r",
													"    const tries = parseInt(pm.collectionVariables.get(\"tries\"), 10);\r",
													"    pm.collectionVariables.set(\"tries\", tries + 1);\r",
													"    setTimeout(function () { }, (pm.collectionVariables.get(\"sleepBetweenTries\")));\r",
													"    postman.setNextRequest(request.name);\r",
													"    console.log(\"request name \" + request.name);\r",
													"\r",
													"} else {\r",
													"    pm.collectionVariables.unset('tries');\r",
													"}"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/roleAssignmentJobs/{{jobId}}?skipSpinner=true",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleAssignmentJobs",
												"{{jobId}}"
											],
											"query": [
												{
													"key": "skipSpinner",
													"value": "true"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get services for company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Get active service for company returns status 200\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Service 1 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Service 2 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"services"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete company group",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204.\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companyGroups",
												"{{companyGroupInvariantKey}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 202.\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"users",
												"{{connectUserId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user group",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/userGroups/{{userGroupInvariantKey}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"userGroups",
												"{{userGroupInvariantKey}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Deactivate company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "PATCH",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"deactivate"
											]
										}
									},
									"response": []
								},
								{
									"name": "Terminate company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "PATCH",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"terminate"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Service activation through user/user group role group assignment to company group",
							"item": [
								{
									"name": "Add role group 1 for company",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// get a random value\r",
													"const RandomDataGenerator = Date.now()\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var roleInvariantKey = JSON.parse(responseBody).roleInvariantKey;\r",
													"pm.collectionVariables.set(\"roleGroupInvariantKeyForCompany1\", roleInvariantKey);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Body matches string\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('name');\r",
													"    pm.expect(pm.response.text()).to.include('roleInvariantKey');\r",
													"    pm.expect(pm.response.text()).to.include('description');\r",
													"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
													"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches description\", function () {\r",
													"    pm.expect(pm.response.json().description).to.eql(\"description+\" + pm.collectionVariables.get(\"randomDataGenerator\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"displayName\":\"RG+++{{randomDataGenerator}}\",\r\n    \"description\": \"description+{{randomDataGenerator}}\"}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/company",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"company"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add role group 2 for company",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// get a random value\r",
													"const RandomDataGenerator = Date.now()\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var roleInvariantKey = JSON.parse(responseBody).roleInvariantKey;\r",
													"pm.collectionVariables.set(\"roleGroupInvariantKeyForCompany2\", roleInvariantKey);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Body matches string\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('name');\r",
													"    pm.expect(pm.response.text()).to.include('roleInvariantKey');\r",
													"    pm.expect(pm.response.text()).to.include('description');\r",
													"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
													"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches description\", function () {\r",
													"    pm.expect(pm.response.json().description).to.eql(\"description+\" + pm.collectionVariables.get(\"randomDataGenerator\"));\r",
													"});\r",
													"\r",
													"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"displayName\":\"RG+++{{randomDataGenerator}}\",\r\n    \"description\": \"description+{{randomDataGenerator}}\"}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/company",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"company"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create company",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// get a random value\r",
													"const RandomDataGenerator = Date.now()\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(responseBody)\r",
													"companyTenantId = jsonData.tenantId\r",
													"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
													"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"The response has all properties\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('name');\r",
													"    pm.expect(pm.response.text()).to.include('tenantId');\r",
													"    pm.expect(pm.response.text()).to.include('countryCode');\r",
													"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
													"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
													"});\r",
													"\r",
													"//4.\r",
													"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
													"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
													"});\r",
													"\r",
													"//5.\r",
													"pm.test(\"DemoCompany is set to false by default\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
													"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companies",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create new company group",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const RandomDataGenerator = Date.now();\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
												],
												"type": "text/javascript",
												"packages": {}
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(responseBody)\r",
													"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
													"name = jsonData.name\r",
													"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey);\r",
													"pm.collectionVariables.set(\"companyGroupName\", name);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companyGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companyGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add company to CG",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const RandomDataGenerator = Date.now();\r",
													"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
												],
												"type": "text/javascript",
												"packages": {}
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200.\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companyGroups",
												"{{companyGroupInvariantKey}}",
												"companies",
												"{{companyTenantId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create new user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"//save connectUserId and userEmail value from response body to collection variables\r",
													"jsonData = JSON.parse(responseBody)\r",
													"connectUserId = jsonData.connectUserId\r",
													"userEmail = jsonData.userEmail\r",
													"pm.collectionVariables.set(\"connectUserId\", connectUserId)\r",
													"pm.collectionVariables.set(\"userEmail\", userEmail)\r",
													"\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status code is 201.\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Body matches string\", function () {\r",
													"    pm.expect(pm.response.text()).to.include('connectUserId');\r",
													"    pm.expect(pm.response.text()).to.include('userEmail');\r",
													"    pm.expect(pm.response.text()).to.include('firstName');\r",
													"    pm.expect(pm.response.text()).to.include('lastName');\r",
													"    pm.expect(pm.response.text()).to.include('userNameChangedBy');\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Response property matches userNameChangedBy\", function () {\r",
													"    pm.expect(pm.response.json().userNameChangedBy).to.eql(pm.environment.get(\"USER\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/users",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create user group",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"//save connectUserId and userEmail value from response body to collection variables\r",
													"jsonData = JSON.parse(responseBody);\r",
													"idUserGroup = jsonData.idUserGroup;\r",
													"userGroupInvariantKey = jsonData.userGroupInvariantKey;\r",
													"userGroupName = jsonData.name;\r",
													"pm.collectionVariables.set(\"idUserGroup\", idUserGroup);\r",
													"pm.collectionVariables.set(\"userGroupInvariantKey\", userGroupInvariantKey);\r",
													"pm.collectionVariables.set(\"userGroupName\", userGroupName);\r",
													"\r",
													"//1.\r",
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"name\": \"UG+{{randomDataGenerator}}\"\r\n}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/userGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"userGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add role 1 to role  group 1",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code is 200.\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}/roles/{{ROLE_INVARIANT_KEY}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"{{roleGroupInvariantKeyForCompany1}}",
												"roles",
												"{{ROLE_INVARIANT_KEY}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add role 2 to role  group 2",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code is 200.\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany2}}/roles/{{ROLE2_INVARIANT_KEY}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"{{roleGroupInvariantKeyForCompany2}}",
												"roles",
												"{{ROLE2_INVARIANT_KEY}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company group role group 1 to user",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/serviceAccess/users",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"serviceAccess",
												"users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Assign company group role group 2 to user group",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"jsonData = JSON.parse(pm.response.text());\r",
													"jobId = jsonData.jobId;\r",
													"pm.collectionVariables.set(\"jobId\", jobId);\r",
													"\r",
													"pm.test(\"Status code\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany2}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"serviceAccess",
												"userGroups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check company group role group role assignment job is completed",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (!pm.collectionVariables.get(\"tries\")) {\r",
													"    pm.collectionVariables.set(\"tries\", 1);\r",
													"}\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"console.log(\"Try # \" + pm.collectionVariables.get(\"tries\"));\r",
													"\r",
													"if (((jsonData.status == \"queued\") && (pm.collectionVariables.get(\"tries\") < (pm.collectionVariables.get(\"maxNumberOfTries\"))))){\r",
													"    console.log(\"Job is not yet COMPLETED. Retrying...\" + jsonData)\r",
													"    const tries = parseInt(pm.collectionVariables.get(\"tries\"), 10);\r",
													"    pm.collectionVariables.set(\"tries\", tries + 1);\r",
													"    setTimeout(function () { }, (pm.collectionVariables.get(\"sleepBetweenTries\")));\r",
													"    postman.setNextRequest(request.name);\r",
													"    console.log(\"request name \" + request.name);\r",
													"\r",
													"} else {\r",
													"    pm.collectionVariables.unset('tries');\r",
													"}"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/roleAssignmentJobs/{{jobId}}?skipSpinner=true",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleAssignmentJobs",
												"{{jobId}}"
											],
											"query": [
												{
													"key": "skipSpinner",
													"value": "true"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get services for company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Get active service for company returns status 200\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"//2.\r",
													"pm.test(\"Service 1 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													"//3.\r",
													"pm.test(\"Service 2 is activated\", function () {\r",
													"    var content = pm.response.json().content;\r",
													"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
													"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
													"    pm.expect(result[0].activated).to.eql(true);\r",
													"    pm.expect(result[0].validFrom).to.exist;\r",
													"    pm.expect(result[0].validTo).to.be.undefined;\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"services"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete role group 1 for company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code is 204.\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"{{roleGroupInvariantKeyForCompany1}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete role group 2 for company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code is 204.\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany2}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"roleGroups",
												"{{roleGroupInvariantKeyForCompany2}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete company group",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204.\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companyGroups",
												"{{companyGroupInvariantKey}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 202.\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"users",
												"{{connectUserId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user group",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{}"
										},
										"url": {
											"raw": "{{BASE_URL}}/v1/userGroups/{{userGroupInvariantKey}}",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"userGroups",
												"{{userGroupInvariantKey}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Deactivate company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "PATCH",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"deactivate"
											]
										}
									},
									"response": []
								},
								{
									"name": "Terminate company",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"//1.\r",
													"pm.test(\"Status code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{accessTokenForUser}}",
													"type": "string"
												}
											]
										},
										"method": "PATCH",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"v1",
												"companies",
												"{{companyTenantId}}",
												"terminate"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "Change company status to deactivated-activated",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody)\r",
											"var companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"postalCode\": \"1234\",\r\n    \"telephone\": \"123456789\",\r\n    \"emailAddress\":\"email@email.com\",\r\n    \"description\": \"description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate first service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate second service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate first service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Deactivate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"name = jsonData.name\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey);\r",
											"pm.collectionVariables.set(\"companyGroupName\", name);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is ACTIVE\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('ACTIVATED');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: tenantId, name, organizationNumber.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Check total number of records\", function () {\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(1);\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company name and tenant matches\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.content[0].tenantId).to.be.eql(pm.collectionVariables.get('companyTenantId'));\r",
											"    pm.expect(jsonData.content[0].name).to.be.eql(pm.collectionVariables.get('companyName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/members",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"members"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service \"+ pm.environment.get(\"SERVICE2_INVARIANT_KEY\")+\" is activated.\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.serviceInvariantKey === pm.environment.get(\"SERVICE2_INVARIANT_KEY\") });\r",
											"    pm.expect(result[0].serviceInvariantKey).to.eql(pm.environment.get(\"SERVICE2_INVARIANT_KEY\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list.\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new user",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"connectUserId = jsonData.connectUserId\r",
											"userEmail = encodeURIComponent(jsonData.userEmail)\r",
											"firstName = jsonData.firstName\r",
											"lastName = jsonData.lastName\r",
											"pm.collectionVariables.set(\"connectUserId\", connectUserId);\r",
											"pm.collectionVariables.set(\"userEmail\", userEmail);\r",
											"pm.collectionVariables.set(\"firstName\", firstName);\r",
											"pm.collectionVariables.set(\"lastName\", lastName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company role to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignments for user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"The response body contains 2 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey, roleInvariantKey).to.eql(pm.environment.get(\"ROLE2_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(true)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company using another customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 403\", function () {    \r",
											"    pm.expect(pm.response.code).to.be.oneOf([403,404])\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserForAnotherCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company using access token for company administrator",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 403\", function () {    \r",
											"    pm.expect(pm.response.code).to.be.oneOf([403,404])\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company again",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The access token does not allow access to the requested company\" , function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(pm.response.text()).to.include('Current company status is DEACTIVATED an it cannot be changed to DEACTIVATED');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignments for user after service is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//4. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"The response body contains 2 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey, roleInvariantKey).to.eql(pm.environment.get(\"ROLE2_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(false)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is ACTIVE\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('DEACTIVATED');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members company is dectivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check total number of records\", function () {\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(0);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/members",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"members"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(false);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate company using token for company administrator",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceReactivation\": true,\r\n    \"roleReassignOnReactivate\": true\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate company reactivate service and roles",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceReactivation\": true,\r\n    \"roleReassignOnReactivate\": true\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is ACTIVE\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('ACTIVATED');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignments for user after company is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//4. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"The response body contains 2 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey, roleInvariantKey).to.eql(pm.environment.get(\"ROLE2_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(true)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate company reactivate only service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceReactivation\": true,\r\n    \"roleReassignOnReactivate\": false\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get services for company is activated and roles are not restored",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Get active service for company returns status 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Service is activated\", function () {\r",
											"    var content = pm.response.json().content;\r",
											"    result = content.filter(function (item) { return item.name === pm.environment.get(\"SERVICE2_DISPLAY_NAME\") });\r",
											"    pm.expect(result[0].name).to.eql(pm.environment.get(\"SERVICE2_DISPLAY_NAME\"));\r",
											"    pm.expect(result[0].activated).to.eql(true);\r",
											"    pm.expect(result[0].validFrom).to.exist;\r",
											"    pm.expect(result[0].validTo).to.be.undefined;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Client Manager is not in the service list\", function () {\r",
											"    pm.expect(pm.response.json().content).to.not.include(pm.environment.get('CLIENT_MANAGER_SERVICE_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignments for user after company is activated with no roles restored",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//4. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"The response body contains 2 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey, roleInvariantKey).to.eql(pm.environment.get(\"ROLE2_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(false)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company using access token for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users",
										"{{connectUserId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Change company status to terminate with service activated",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody)\r",
											"var companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"postalCode\": \"1234\",\r\n    \"telephone\": \"123456789\",\r\n    \"emailAddress\":\"email@email.com\",\r\n    \"description\": \"description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is on DELETED status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is TERMINATED\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('TERMINATED');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company on TERMINATED status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The access token does not allow access to the requested company\" , function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(pm.response.text()).to.include('Current company status is TERMINATED an it cannot be changed to DEACTIVATED');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate company on TERMINATED status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The access token does not allow access to the requested company\" , function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(pm.response.text()).to.include('Current company status is TERMINATED an it cannot be changed to ACTIVATED');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceReactivation\": true,\r\n    \"roleReassignOnReactivate\": false\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Change company status to terminate no service ever activated",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody)\r",
											"var companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"postalCode\": \"1234\",\r\n    \"telephone\": \"123456789\",\r\n    \"emailAddress\":\"email@email.com\",\r\n    \"description\": \"description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company on ACTIVATED status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The access token does not allow access to the requested company\" , function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(pm.response.text()).to.include('Current company status is ACTIVATED an it cannot be changed to TERMINATED');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company is on DELETED status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"CompanyStatus is DELETED\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.status).to.be.eq('DELETED');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company on DELETE status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The access token does not allow access to the requested company\" , function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(pm.response.text()).to.include('Current company status is DELETED an it cannot be changed to DEACTIVATED');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate company on  DELETED status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The access token does not allow access to the requested company\" , function () {\r",
											"    pm.expect(pm.response.text()).to.include('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(pm.response.text()).to.include('Current company status is DELETED an it cannot be changed to ACTIVATED');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceReactivation\": true,\r\n    \"roleReassignOnReactivate\": false\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Company service change with roles assigned",
					"item": [
						{
							"name": "Create new user",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"connectUserId = jsonData.connectUserId\r",
											"userEmail = encodeURIComponent(jsonData.userEmail)\r",
											"firstName = jsonData.firstName\r",
											"lastName = jsonData.lastName\r",
											"pm.collectionVariables.set(\"connectUserId\", connectUserId);\r",
											"pm.collectionVariables.set(\"userEmail\", userEmail);\r",
											"pm.collectionVariables.set(\"firstName\", firstName);\r",
											"pm.collectionVariables.set(\"lastName\", lastName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services before service is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Save usage of application \" + pm.environment.get(\"SERVICE_INVARIANT_KEY\"), function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            pm.collectionVariables.set('usedCompanies',item.usedCompanies );\r",
											"        }\r",
											"    });\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company role to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignment for user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"The response body contains 1 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey).to.eql(pm.environment.get(\"ROLE_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(true)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is activated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been increse\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var increaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            increaseCompanyUsage = item.usedCompanies >= pm.collectionVariables.get('usedCompanies');\r",
											"            pm.collectionVariables.set('usedCompanies', item.usedCompanies);\r",
											"        }\r",
											"    });\r",
											"    pm.expect(increaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Deactivate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been decrease\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var decreaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            decreaseCompanyUsage = item.usedCompanies <= pm.collectionVariables.get('usedCompanies');\r",
											"            pm.collectionVariables.set('usedCompanies', item.usedCompanies);\r",
											"        }\r",
											"    });\r",
											"    pm.expect(decreaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignment for user after service deactivation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//4. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"The response body contains 1 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey).to.eql(pm.environment.get(\"ROLE_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(false)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companies/users/roles?fields=connectUserId,name,context,tenantId,role,roleInvariantKey,service,rowExists&filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "connectUserId,name,context,tenantId,role,roleInvariantKey,service,rowExists"
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Reactivate service not restoring roles",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is reactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been increse\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var increaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            increaseCompanyUsage = item.usedCompanies >= pm.collectionVariables.get('usedCompanies');\r",
											"            pm.collectionVariables.set('usedCompanies', item.usedCompanies);\r",
											"        }\r",
											"    });\r",
											"    pm.expect(increaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignment for user after service reactivation not restoring roles",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//5. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"The response body contains 1 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//7.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey).to.eql(pm.environment.get(\"ROLE_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//8.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(false)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companies/users/roles?filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company role to user again",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service again",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Deactivate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer services after service is deactivated again",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 400\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Activate service for company has been decrease\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var decreaseCompanyUsage = false;\r",
											"    jsonData.filter(function (item) {\r",
											"        if (item.serviceInvariantKey === pm.environment.get(\"SERVICE_INVARIANT_KEY\")) {\r",
											"            decreaseCompanyUsage = item.usedCompanies <= pm.collectionVariables.get('usedCompanies');\r",
											"        }\r",
											"    });\r",
											"    pm.expect(decreaseCompanyUsage).to.be.true;\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/services",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"services"
									]
								}
							},
							"response": []
						},
						{
							"name": "Reactivate service restoring roles",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\",\r\n    \"roleReassignOnReactivate\": true\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get role assignment for user after service reactivation restoring roles",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"\r",
											"//3. \r",
											"pm.test(\"tenantId value is the same in each object\", () => {\r",
											"    const response = pm.response.json().content;\r",
											"    const tenantId = response.map(item => item.tenantId)\r",
											"    let compare = response[0].tenantId;\r",
											"    function isTenantIdTheSameInEachObject(a) { return response.every(item => item.tenantId === compare); }\r",
											"    pm.expect(isTenantIdTheSameInEachObject(tenantId)).to.be.true;\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"The response body contains 1 records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.eql(1)\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"Response contains the requested roleInvariantKey\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    roleInvariantKey = jsonData.content[0].roleInvariantKey;\r",
											"    pm.expect(roleInvariantKey).to.eql(pm.environment.get(\"ROLE_INVARIANT_KEY\"));\r",
											"});\r",
											"\r",
											"//6.\r",
											"pm.test(\"Role is assigned to one user\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    rowExistsForAssignedUser = jsonData.content[0].connectUserId === pm.collectionVariables.get(\"connectUserId\") ? jsonData.content[0].rowExists : jsonData.content[1].rowExists;\r",
											"    pm.expect(rowExistsForAssignedUser).to.eql(true)\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companies/users/roles?fields=connectUserId,name,context,tenantId,role,roleInvariantKey,service,rowExists&filter=connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companies",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "page",
											"value": "0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "20",
											"disabled": true
										},
										{
											"key": "sort",
											"value": "user,ASC",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "connectUserId,name,context,tenantId,role,roleInvariantKey,service,rowExists"
										},
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];roleInvariantKey,in,[{{ROLE_INVARIANT_KEY}}];tenantId,in,[{{companyTenantId}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users",
										"{{connectUserId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Customer name for customer own company",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenantId: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer name for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check customer name.\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    var customerName = jsonData.customerName;\r",
											"    pm.expect(customerName).to.be.eq(pm.environment.get('CUSTOMER_NAME'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/customerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"customerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer name for company as company admin",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check customer name.\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    var customerName = jsonData.customerName;\r",
											"    pm.expect(customerName).to.be.eq(pm.environment.get('CUSTOMER_NAME'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/customerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"customerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer name for company as subscriber viewer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check customer name.\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    var customerName = jsonData.customerName;\r",
											"    pm.expect(customerName).to.be.eq(pm.environment.get('CUSTOMER_NAME'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{CUSTOMER_TENANT_ID}}/companies/{{companyTenantId}}/customerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{CUSTOMER_TENANT_ID}}",
										"companies",
										"{{companyTenantId}}",
										"customerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Customer name for customer client company",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer name for customer client company from client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check customer name.\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    var customerName = jsonData.customerName;\r",
											"    pm.expect(customerName).to.be.eq(pm.environment.get('NAME_FOR_AO_CLIENT_CUSTOMER'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/customerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"customerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer name for customer client company from AO customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check customer name.\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    var customerName = jsonData.customerName;\r",
											"    pm.expect(customerName).to.be.eq(pm.environment.get('NAME_FOR_AO_CLIENT_CUSTOMER'));\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/customerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"customerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get customer name for customer client company as subscriber viewer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check customer name.\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    var customerName = jsonData.customerName;\r",
											"    pm.expect(customerName).to.be.eq(pm.environment.get('NAME_FOR_AO_CLIENT_CUSTOMER'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{TENANT_FOR_AO_CLIENT_CUSTOMER}}/companies/{{clientCompanyTenantId}}/customerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{TENANT_FOR_AO_CLIENT_CUSTOMER}}",
										"companies",
										"{{clientCompanyTenantId}}",
										"customerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete customer client company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Terminate company  by user that does not have rights",
					"item": [
						{
							"name": "Access Token for User SecondCA [1]",
							"item": [
								{
									"name": "Access Token for User [Mock with AWS]",
									"item": [
										{
											"name": "Use Mock with AWS?",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
															"    console.log(\"Mock with AWS is used in environment \" + pm.environment.name);",
															"    // When using setNextRequest make sure you don't have to requests with the same name!",
															"    // Request ID can also ne used.",
															"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/",
															"    postman.setNextRequest(\"Access Token for User SecondCA [1] - Authorize\");",
															"} else {",
															"    postman.setNextRequest(\"Access Token for User SecondCA [1] - Use Visma Connect?\");",
															"}"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{BASE_URL}}/actuator/health",
													"host": [
														"{{BASE_URL}}"
													],
													"path": [
														"actuator",
														"health"
													]
												}
											},
											"response": []
										},
										{
											"name": "Access Token for User SecondCA [1] - Authorize",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"// clear cookies\r",
															"const cookieJar = pm.cookies.jar();\r",
															"\r",
															"cookieJar.clear(pm.environment.get(\"VISMA_CONNECT_URL\") + pm.environment.get(\"AUTHORIZE_PATH\"), function (error) {\r",
															"    // To whitelist a domain so that cookies can be programmatically accessed, \r",
															"    // click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
															"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
															"    if (error) {\r",
															"        console.log(error);\r",
															"    }\r",
															"});\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"// asserts\r",
															"pm.test(\"Response status code is ok.\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"// Only used with the Visma Connect mock done with AWS Cognito.\r",
															"const cookieJar = pm.cookies.jar();\r",
															"const xsrfToken = cookieJar.get(pm.environment.get(\"VISMA_CONNECT_URL\") \r",
															"    + pm.environment.get(\"LOGIN_URL\"), 'XSRF-TOKEN', function(error, cookie) {\r",
															"        if (error) {\r",
															"            console.log(error);\r",
															"        } else {\r",
															"            pm.collectionVariables.set('xsrfToken', cookie);\r",
															"        }\r",
															"});\r",
															"pm.collectionVariables.set('xsrfToken', xsrfToken);\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post",
													"host": [
														"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
													],
													"query": [
														{
															"key": "client_id",
															"value": "{{CLIENT_ID_ADMIN_UI}}"
														},
														{
															"key": "redirect_uri",
															"value": "{{REDIRECT_URI}}"
														},
														{
															"key": "response_type",
															"value": "code"
														},
														{
															"key": "scope",
															"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
														},
														{
															"key": "state",
															"value": "test_scope"
														},
														{
															"key": "response_mode",
															"value": "form_post"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Login",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful status code\", function(){",
															"    pm.expect(pm.response.code).to.eq(302);",
															"});",
															"pm.test(\"Has Location header with authorization code\", function(){",
															"    pm.response.to.have.header(\"Location\");",
															"    var location = pm.response.headers.get(\"Location\");",
															"    pm.expect(location.startsWith(pm.environment.get(\"REDIRECT_URI\") + \"?code=\")).is.true;",
															"    pm.collectionVariables.set(\"authorizationCode\", location.substring(location.indexOf(\"?code=\") + \"?code=\".length));",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"protocolProfileBehavior": {
												"followRedirects": false
											},
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "username",
															"value": "{{USER_EMAIL_SECOND_CA}}",
															"type": "text"
														},
														{
															"key": "password",
															"value": "{{PASSWORD}}",
															"type": "text"
														},
														{
															"key": "_csrf",
															"value": "{{xsrfToken}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}?client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&redirect_uri={{REDIRECT_URI}}&scope={{ADMIN_CUSTOMER_UI_SCOPES}}",
													"host": [
														"{{VISMA_CONNECT_URL}}{{LOGIN_PATH}}"
													],
													"query": [
														{
															"key": "client_id",
															"value": "{{CLIENT_ID_ADMIN_UI}}"
														},
														{
															"key": "response_type",
															"value": "code"
														},
														{
															"key": "redirect_uri",
															"value": "{{REDIRECT_URI}}"
														},
														{
															"key": "scope",
															"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Get token",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"var json = pm.response.json();",
															"",
															"// asserts",
															"pm.test(\"Response status code is ok\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"pm.test(\"Response contains access_token\", function () {",
															"    pm.expect(json.access_token).not.equal(null);",
															"});",
															"",
															"// get request verification token value",
															"pm.collectionVariables.set(\"accessTokenForUserSecondCA\", json.access_token);",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "client_id",
															"value": "{{CLIENT_ID_ADMIN_UI}}",
															"type": "text"
														},
														{
															"key": "grant_type",
															"value": "authorization_code",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "code",
															"value": "{{authorizationCode}}",
															"type": "text"
														},
														{
															"key": "tenant_hint",
															"value": "{{CUSTOMER_TENANT_ID}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
													"host": [
														"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Access Token for User [Visma Connect]",
									"item": [
										{
											"name": "Access Token for User SecondCA [1] - Use Visma Connect?",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"if (pm.environment.name.includes(\"local\") || pm.environment.name.includes(\"int\")) {",
															"    // When using setNextRequest make sure you don't have to requests with the same name!",
															"    // Request ID can also ne used.",
															"    // See https://learning.postman.com/docs/collections/running-collections/building-workflows/    ",
															"    postman.setNextRequest(\"Access Token for User SecondCA [1] - End Access Token for User\");",
															"} else {",
															"    console.log(\"Visma Connect is used in environment \" + pm.environment.name);",
															"    postman.setNextRequest(\"Access Token for User SecondCA [1] - Get login screen\");",
															"}"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{BASE_URL}}/actuator/health",
													"host": [
														"{{BASE_URL}}"
													],
													"path": [
														"actuator",
														"health"
													]
												}
											},
											"response": []
										},
										{
											"name": "Access Token for User SecondCA [1] - Get login screen",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"// clear cookies\r",
															"const jar = pm.cookies.jar();\r",
															"\r",
															"var cookieUrl = \".\" + pm.environment.get(\"VISMA_CONNECT_URL\").replace(\"https://\", \"\");\r",
															"\r",
															"jar.clear(cookieUrl, function (error) {\r",
															"    // To whitelist a domain so that cookies can be programmatically accessed, click the Cookies link under the Send button and open the MANAGE COOKIES modal.\r",
															"    // Click on Whitelist Domains from bottom left and enter the list of domains needed to be whitelisted.\r",
															"    console.log(error);\r",
															"});\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"// asserts\r",
															"pm.test(\"Response status code is ok.\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"// get request verification token value\r",
															"var html = cheerio(responseBody);\r",
															"pm.collectionVariables.set(\"requestVerificationToken\", html.find('input[name=__RequestVerificationToken]').attr('value'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{VISMA_CONNECT_URL}}{{LOGIN_URL}}?client_id={{CLIENT_ID_ADMIN_UI}}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=test_scope&response_mode=form_post&tenant_hint={{CUSTOMER_TENANT_ID}}",
													"host": [
														"{{VISMA_CONNECT_URL}}{{LOGIN_URL}}"
													],
													"query": [
														{
															"key": "client_id",
															"value": "{{CLIENT_ID_ADMIN_UI}}"
														},
														{
															"key": "redirect_uri",
															"value": "{{REDIRECT_URI}}"
														},
														{
															"key": "response_type",
															"value": "code"
														},
														{
															"key": "scope",
															"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
														},
														{
															"key": "state",
															"value": "test_scope"
														},
														{
															"key": "response_mode",
															"value": "form_post"
														},
														{
															"key": "tenant_hint",
															"value": "{{CUSTOMER_TENANT_ID}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Post user login",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful status code\", function(){",
															"    pm.expect(pm.response.code).to.eq(302);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"protocolProfileBehavior": {
												"followRedirects": false
											},
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "Username",
															"value": "{{USER_EMAIL_SECOND_CA}}",
															"type": "text"
														},
														{
															"key": "Password",
															"value": "{{PASSWORD}}",
															"type": "text"
														},
														{
															"key": "__RequestVerificationToken",
															"value": "{{requestVerificationToken}}",
															"type": "text"
														},
														{
															"key": "ClientId",
															"value": "{{CLIENT_ID_ADMIN_UI}}",
															"type": "text"
														},
														{
															"key": "ReturnUrl",
															"value": "{{REDIRECT_URI}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{VISMA_CONNECT_URL}}",
													"host": [
														"{{VISMA_CONNECT_URL}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "Post user password",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful status code\", function(){",
															"    pm.expect(pm.response.code).to.eq(302);",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"protocolProfileBehavior": {
												"followRedirects": false
											},
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "Username",
															"value": "{{USER_EMAIL_SECOND_CA}}",
															"type": "text"
														},
														{
															"key": "Password",
															"value": "{{PASSWORD}}",
															"type": "text"
														},
														{
															"key": "__RequestVerificationToken",
															"value": "{{requestVerificationToken}}",
															"type": "text"
														},
														{
															"key": "ClientId",
															"value": "{{CLIENT_ID_ADMIN_UI}}",
															"type": "text"
														},
														{
															"key": "ReturnUrl",
															"value": "{{REDIRECT_URI}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{VISMA_CONNECT_URL}}/password",
													"host": [
														"{{VISMA_CONNECT_URL}}"
													],
													"path": [
														"password"
													]
												}
											},
											"response": []
										},
										{
											"name": "Get authorize request",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"var html = cheerio(responseBody);",
															"",
															"// asserts",
															"pm.test(\"Response status code is redirect\", function () {",
															"    pm.response.to.have.status(302);",
															"});",
															"",
															"// In case the Location header starts with \"/recovery\", it means that Visma Connect is asking the user to",
															"// add account recovery options.",
															"// You need to log in with the user account, from a web browser, and to dismiss the Recovery popup.",
															"// We are logging the Location header to leave an indication if this scenario appeared.",
															"// We believe it happens every 3 months.",
															"console.log(pm.response.headers.get('Location'));",
															"",
															"// get authorization code value",
															"parser = require('postman-collection').Url.parse",
															"pm.collectionVariables.set(\"authorizationCode\", parser(pm.response.headers.get('Location')).query.find(a => a.key === \"code\")[\"value\"]);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"var codeVerifier = getVerifier();\r",
															"\r",
															"console.log(\"Code verifier :\" + codeVerifier);\r",
															"console.log(\"Code challange :\" + getCodeChallange(codeVerifier));\r",
															"\r",
															"pm.collectionVariables.set(\"codeVerifier\", codeVerifier );\r",
															"pm.collectionVariables.set(\"codeChallange\", getCodeChallange(codeVerifier));\r",
															"\r",
															"\r",
															" function getVerifier(){\r",
															"    const value = CryptoJS.lib.WordArray.random(32);\r",
															"    return getBase64URLEncode(value);\r",
															" }\r",
															"\r",
															" function getCodeChallange(value){\r",
															"   return getBase64URLEncode(CryptoJS.SHA256(value));\r",
															" }\r",
															"\r",
															" function getBase64URLEncode(value){\r",
															"    return CryptoJS.enc.Base64.stringify(value)\r",
															"      .replace(/\\+/g, '-')\r",
															"      .replace(/\\//g, '_')\r",
															"      .replace(/=/g, '');\r",
															"  }"
														],
														"type": "text/javascript"
													}
												}
											],
											"protocolProfileBehavior": {
												"followRedirects": false
											},
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}?redirect_uri={{REDIRECT_URI}}&client_id={{CLIENT_ID_ADMIN_UI}}&response_type=code&scope={{ADMIN_CUSTOMER_UI_SCOPES}}&state=teststate&code_challenge={{codeChallange}}&code_challenge_method=S256&response_mode=query&tenant_hint={{CUSTOMER_TENANT_ID}}",
													"host": [
														"{{VISMA_CONNECT_URL}}{{AUTHORIZE_PATH}}"
													],
													"query": [
														{
															"key": "redirect_uri",
															"value": "{{REDIRECT_URI}}"
														},
														{
															"key": "client_id",
															"value": "{{CLIENT_ID_ADMIN_UI}}"
														},
														{
															"key": "response_type",
															"value": "code"
														},
														{
															"key": "scope",
															"value": "{{ADMIN_CUSTOMER_UI_SCOPES}}"
														},
														{
															"key": "state",
															"value": "teststate"
														},
														{
															"key": "code_challenge",
															"value": "{{codeChallange}}"
														},
														{
															"key": "code_challenge_method",
															"value": "S256"
														},
														{
															"key": "response_mode",
															"value": "query"
														},
														{
															"key": "tenant_hint",
															"value": "{{CUSTOMER_TENANT_ID}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Post token request",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"var json = pm.response.json();",
															"",
															"// asserts",
															"pm.test(\"Response status code is ok\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"pm.test(\"Response contains access_token\", function () {",
															"    pm.expect(json.access_token).not.equal(null);",
															"});",
															"",
															"// get request verification token value",
															"pm.collectionVariables.set(\"accessTokenForUserSecondCA\", json.access_token);",
															"",
															"const jar = pm.cookies.jar();",
															"jar.clear(pm.request.url, function (error) {",
															"    console.log(error);",
															"});",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "client_id",
															"value": "{{CLIENT_ID_ADMIN_UI}}",
															"type": "text"
														},
														{
															"key": "grant_type",
															"value": "authorization_code",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "code",
															"value": "{{authorizationCode}}",
															"type": "text"
														},
														{
															"key": "code_verifier",
															"value": "{{codeVerifier}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
													"host": [
														"{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}"
													]
												}
											},
											"response": []
										}
									],
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									]
								},
								{
									"name": "Access Token for User SecondCA [1] - End Access Token for User",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{BASE_URL}}/actuator/health",
											"host": [
												"{{BASE_URL}}"
											],
											"path": [
												"actuator",
												"health"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody)\r",
											"var companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"Company status matches.\", function () {\r",
											"    pm.expect(pm.response.json().activatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().deactivatedServices).to.be.false;\r",
											"    pm.expect(pm.response.json().status).to.be.eq(\"ACTIVATED\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserSecondCA}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"postalCode\": \"1234\",\r\n    \"telephone\": \"123456789\",\r\n    \"emailAddress\":\"email@email.com\",\r\n    \"description\": \"description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserSecondCA}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company with user that is not allowed",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"The response contains a code and a message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('code');\r",
											"    pm.expect(pm.response.text()).to.include('message');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The access token does not allow access to the requested company\" , function () {\r",
											"    pm.expect(pm.response.text()).to.include('COMPANY_NOT_FOUND');\r",
											"    pm.expect(pm.response.text()).to.include('There is no company with tenant id ' + pm.collectionVariables.get('companyTenantId'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserForAnotherCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserSecondCA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Company Group members",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to false\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(false);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\",\r\n    \"informUsersAboutRoleAssignmentUpdates\" : false,\r\n    \"demoCompany\" : false\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"idCompanyGroup = jsonData.idCompanyGroup;\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"nameCompanyGroup = jsonData.name\r",
											"pm.collectionVariables.set(\"idCompanyGroup\", idCompanyGroup);\r",
											"pm.collectionVariables.set(\"nameCompanyGroup\", nameCompanyGroup);\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey)\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create  second company group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"idCompanyGroupSecond = jsonData.idCompanyGroup\r",
											"companyGroupInvariantKey2 = jsonData.companyGroupInvariantKey;\r",
											"pm.collectionVariables.set(\"idCompanyGroupSecond\", idCompanyGroupSecond);\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey2\", companyGroupInvariantKey2);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const RandomDataGenerator = Date.now();\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator); "
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey2}}/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey2}}",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company - subscriber viewer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{CUSTOMER_TENANT_ID}}/companies/{{companyTenantId}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{CUSTOMER_TENANT_ID}}",
										"companies",
										"{{companyTenantId}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company based on field companyGroupInvariantKey",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response contains only companyGroupInvariantKey\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.not.include('name');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/companyGroups?fields=companyGroupInvariantKey",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"companyGroups"
									],
									"query": [
										{
											"key": "fields",
											"value": "companyGroupInvariantKey"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company search by company group invariant key",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group returned\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(pm.collectionVariables.get(\"companyGroupInvariantKey\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/companyGroups?filter=companyGroupInvariantKey,eq,{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"companyGroups"
									],
									"query": [
										{
											"key": "filter",
											"value": "companyGroupInvariantKey,eq,{{companyGroupInvariantKey}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company search by name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Check total number of records\", function () {\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.eql(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/companyGroups?filter=name,like,{{nameCompanyGroup}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"companyGroups"
									],
									"query": [
										{
											"key": "filter",
											"value": "name,like,{{nameCompanyGroup}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group possible members for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/possibleCompanyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"possibleCompanyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group possible members for company - subscriber viewer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{CUSTOMER_TENANT_ID}}/companies/{{companyTenantId}}/possibleCompanyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{CUSTOMER_TENANT_ID}}",
										"companies",
										"{{companyTenantId}}",
										"possibleCompanyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group possible members search by name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Check total number of records\", function () {\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.greaterThan(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/possibleCompanyGroups?filter=name,like,AccessMngmtAPIPostman&sort=name,desc&fields=companyGroupInvariantKey,name",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"possibleCompanyGroups"
									],
									"query": [
										{
											"key": "filter",
											"value": "name,like,AccessMngmtAPIPostman"
										},
										{
											"key": "sort",
											"value": "name,desc"
										},
										{
											"key": "fields",
											"value": "companyGroupInvariantKey,name"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete first company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete second company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey2}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey2}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Change client company status from AO",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate client company on AO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check error message\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.code).to.be.eq('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(response.message).to.be.eq('Client company can not be DEACTIVATED from AO customer');\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate client company on client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate client company on AO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check error message\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.code).to.be.eq('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(response.message).to.be.eq('Client company can not be TERMINATED from AO customer');\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate client company on AO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check error message\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.code).to.be.eq('ERROR_CHANGING_COMPANY_STATUS');\r",
											"    pm.expect(response.message).to.be.eq('Client company can not be ACTIVATED from AO customer');\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceReactivation\": true,\r\n    \"roleReassignOnReactivate\": true\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company on client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Company group that needs to be removed from company on a service deactivation",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"name = jsonData.name\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey);\r",
											"pm.collectionVariables.set(\"companyGroupName\", name);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new user",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"connectUserId = jsonData.connectUserId\r",
											"userEmail = encodeURIComponent(jsonData.userEmail)\r",
											"firstName = jsonData.firstName\r",
											"lastName = jsonData.lastName\r",
											"pm.collectionVariables.set(\"connectUserId\", connectUserId);\r",
											"pm.collectionVariables.set(\"userEmail\", userEmail);\r",
											"pm.collectionVariables.set(\"firstName\", firstName);\r",
											"pm.collectionVariables.set(\"lastName\", lastName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"     pm.expect(pm.response.text()).not.to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"     pm.expect(pm.response.text()).to.be.eq('[]');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.companyGroups).to.be.an('array').that.is.empty;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.companyGroups.length).to.be.eq(1);\r",
											"    var element = response.companyGroups[0];\r",
											"    pm.expect(element.inheritedFromName).to.be.eq(pm.collectionVariables.get('companyGroupName'));\r",
											"    pm.expect(element.services.length).to.be.eq(1);\r",
											"    pm.expect(element.services[0]).to.be.eq(pm.environment.get('SERVICE2_DISPLAY_NAME'));\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"     pm.expect(pm.response.text()).not.to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"     pm.expect(pm.response.text()).to.be.eq('[]');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.companyGroups).to.be.an('array').that.is.empty;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add role group for company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var roleInvariantKey = JSON.parse(responseBody).roleInvariantKey;\r",
											"pm.collectionVariables.set(\"roleGroupInvariantKeyForCompany1\", roleInvariantKey);\r",
											"var roleGroupName = JSON.parse(responseBody).name\r",
											"pm.collectionVariables.set(\"roleGroupName\", roleGroupName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"displayName\":\"RG+++{{randomDataGenerator}}\",\r\n    \"description\": \"description+{{randomDataGenerator}}\"}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/roleGroups/company",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleGroups",
										"company"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add first role to role  group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}/roles/{{ROLE_INVARIANT_KEY}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleGroups",
										"{{roleGroupInvariantKeyForCompany1}}",
										"roles",
										"{{ROLE_INVARIANT_KEY}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add second role to role  group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}/roles/{{ROLE2_INVARIANT_KEY}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleGroups",
										"{{roleGroupInvariantKeyForCompany1}}",
										"roles",
										"{{ROLE2_INVARIANT_KEY}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role group to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 4",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 4",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.companyGroups.length).to.be.eq(1);\r",
											"    var element = response.companyGroups[0];\r",
											"    pm.expect(element.inheritedFromName).to.be.eq(pm.collectionVariables.get('companyGroupName'));\r",
											"    pm.expect(element.services.length).to.be.eq(1);\r",
											"    pm.expect(element.services[0]).to.be.eq(pm.environment.get('SERVICE2_DISPLAY_NAME'));\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company role group to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 4a",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Role group is returned in response.\", function () {\r",
											"var response = pm.response.json();\r",
											"    pm.expect(response.roleGroups).to.be.an('array').that.is.not.empty;\r",
											"    pm.expect(response.roleGroups.length).to.be.greaterThan(0);\r",
											"});\r",
											"\r",
											"//3. \r",
											"pm.test(\"Potential service to be deactivated for role group: \" + pm.environment.get('SERVICE_DISPLAY_NAME'), function () {\r",
											"    var response = pm.response.json();\r",
											"    let expectedServices = [\r",
											"        pm.environment.get('SERVICE_DISPLAY_NAME')\r",
											"    ];\r",
											"    response.roleGroups.forEach(group => {\r",
											"        pm.expect(group.services).to.be.an('array').that.includes.members(expectedServices);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company role group to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"tenantId\":\"{{companyTenantId}}\",\r\n        \"toGrant\":false\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role group to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 5",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"     pm.expect(pm.response.text()).not.to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"     pm.expect(pm.response.text()).to.be.eq('[]');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 5",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.companyGroups).to.be.an('array').that.is.empty;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create user group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//save connectUserId and userEmail value from response body to collection variables\r",
											"jsonData = JSON.parse(responseBody);\r",
											"idUserGroup = jsonData.idUserGroup;\r",
											"userGroupInvariantKey = jsonData.userGroupInvariantKey;\r",
											"userGroupName = jsonData.name;\r",
											"pm.collectionVariables.set(\"idUserGroup\", idUserGroup);\r",
											"pm.collectionVariables.set(\"userGroupInvariantKey\", userGroupInvariantKey);\r",
											"pm.collectionVariables.set(\"userGroupName\", userGroupName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"UG+{{randomDataGenerator}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role for user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(pm.response.text());\r",
											"jobId = jsonData.jobId;\r",
											"pm.collectionVariables.set(\"jobId\", jobId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role group to user 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 6",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 6",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role for user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_3SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role group to user 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 7",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"     pm.expect(pm.response.text()).not.to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"     pm.expect(pm.response.text()).to.be.eq('[]');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 7",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.companyGroups).to.be.an('array').that.is.empty;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role group for user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role group to user 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 8",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 8",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.companyGroups.length).to.be.eq(1);\r",
											"    var element = response.companyGroups[0];\r",
											"    pm.expect(element.inheritedFromName).to.be.eq(pm.collectionVariables.get('companyGroupName'));\r",
											"    pm.expect(response.companyGroups).to.be.an('array').that.is.not.empty;\r",
											"\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role group for user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role group to user 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 9",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"     pm.expect(pm.response.text()).not.to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"     pm.expect(pm.response.text()).to.be.eq('[]');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company inherited access check on deactivate service 9",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.companyGroups).to.be.an('array').that.is.empty;\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Role group is not present in response\", function () {\r",
											"    var response = pm.response.json();\r",
											"     pm.expect(response.roleGroups).to.be.an('array').that.is.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/inheritedAccess",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"inheritedAccess"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users",
										"{{connectUserId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/userGroups/{{userGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"userGroups",
										"{{userGroupInvariantKey}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete role group for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleGroups",
										"{{roleGroupInvariantKeyForCompany1}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Remove company group membership when a service is deactivated",
					"item": [
						{
							"name": "Create new company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = pm.response.json();\r",
											"var companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"var name = jsonData.name;\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey);\r",
											"pm.collectionVariables.set(\"companyGroupName\", name);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new user",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"connectUserId = jsonData.connectUserId\r",
											"userEmail = encodeURIComponent(jsonData.userEmail)\r",
											"firstName = jsonData.firstName\r",
											"lastName = jsonData.lastName\r",
											"pm.collectionVariables.set(\"connectUserId\", connectUserId);\r",
											"pm.collectionVariables.set(\"userEmail\", userEmail);\r",
											"pm.collectionVariables.set(\"firstName\", firstName);\r",
											"pm.collectionVariables.set(\"lastName\", lastName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG 1",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"     pm.expect(pm.response.text()).not.to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"     pm.expect(pm.response.text()).to.be.eq('[]');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Check role is still assigned to company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company is having the role assigned\", function () {\r",
											"     pm.expect(pm.response.json().totalNumberOfRecords).to.be.eq(1);\r",
											"     pm.expect(pm.response.json().content[0].rowExists).to.true;\r",
											"     pm.expect(pm.response.json().content[0].roleInvariantKey).to.eq(pm.environment.get('ROLE2_INVARIANT_KEY'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/companyGroups/users/roles?filter=connectUserId,in,[{{connectUserId}}];companyGroupInvariantKey,in,[{{companyGroupInvariantKey}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}]",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"companyGroups",
										"users",
										"roles"
									],
									"query": [
										{
											"key": "filter",
											"value": "connectUserId,in,[{{connectUserId}}];companyGroupInvariantKey,in,[{{companyGroupInvariantKey}}];roleInvariantKey,in,[{{ROLE2_INVARIANT_KEY}}]"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Reactivate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 4",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"     pm.expect(pm.response.text()).not.to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"     pm.expect(pm.response.text()).to.be.eq('[]');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG 2",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 409.\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response body contains the error.\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.code).to.be.eql(\"COMPANY_GROUP_MEMBER_ALREADY_EXIST\");\r",
											"    pm.expect(response.message).to.be.eq('Company with name ' + pm.collectionVariables.get('companyName') + ' is already member in company group with name ' + pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add role group for company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var roleInvariantKey = JSON.parse(responseBody).roleInvariantKey;\r",
											"pm.collectionVariables.set(\"roleGroupInvariantKeyForCompany1\", roleInvariantKey);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"displayName\":\"RG+++{{randomDataGenerator}}\",\r\n    \"description\": \"description+{{randomDataGenerator}}\"}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/roleGroups/company",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleGroups",
										"company"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add role to role  group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}/roles/{{ROLE2_INVARIANT_KEY}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleGroups",
										"{{roleGroupInvariantKeyForCompany1}}",
										"roles",
										"{{ROLE2_INVARIANT_KEY}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role group to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 5",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 6",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role group to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG 3",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 409.\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response body contains the error.\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.code).to.be.eql(\"COMPANY_GROUP_MEMBER_ALREADY_EXIST\");\r",
											"    pm.expect(response.message).to.be.eq('Company with name ' + pm.collectionVariables.get('companyName') + ' is already member in company group with name ' + pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Reactivate service for company 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create user group",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//save connectUserId and userEmail value from response body to collection variables\r",
											"jsonData = JSON.parse(responseBody);\r",
											"idUserGroup = jsonData.idUserGroup;\r",
											"userGroupInvariantKey = jsonData.userGroupInvariantKey;\r",
											"userGroupName = jsonData.name;\r",
											"pm.collectionVariables.set(\"idUserGroup\", idUserGroup);\r",
											"pm.collectionVariables.set(\"userGroupInvariantKey\", userGroupInvariantKey);\r",
											"pm.collectionVariables.set(\"userGroupName\", userGroupName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"UG+{{randomDataGenerator}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role for user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(pm.response.text());\r",
											"jobId = jsonData.jobId;\r",
											"pm.collectionVariables.set(\"jobId\", jobId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_3SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 7",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 8",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Revoke company group role for user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_3SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":false\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG 4",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 409.\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response body contains the error.\", function () {\r",
											"    var response = pm.response.json();\r",
											"    pm.expect(response.code).to.be.eql(\"COMPANY_GROUP_MEMBER_ALREADY_EXIST\");\r",
											"    pm.expect(response.message).to.be.eq('Company with name ' + pm.collectionVariables.get('companyName') + ' is already member in company group with name ' + pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 9",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is not present in response\", function () {\r",
											"     pm.expect(pm.response.text()).not.to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"     pm.expect(pm.response.text()).to.be.eq('[]');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Reactivate service for company 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group role group for user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_3SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{roleGroupInvariantKeyForCompany1}}\",\r\n        \"userGroupInvariantKey\":\"{{userGroupInvariantKey}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/userGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"userGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 10",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for company 4",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_5SEC')]);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Company groups of company with roles assigned for service 10",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Company group is present in response\", function () {\r",
											"     pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupName'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/{{SERVICE2_INVARIANT_KEY}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"{{SERVICE2_INVARIANT_KEY}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users",
										"{{connectUserId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/userGroups/{{userGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"userGroups",
										"{{userGroupInvariantKey}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete role group for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/roleGroups/{{roleGroupInvariantKeyForCompany1}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"roleGroups",
										"{{roleGroupInvariantKeyForCompany1}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company group",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Service deactivation of service for client  company with CG ,membership and role assignment on AO",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name Copy",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for client company on AO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service 2 for client company on AO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new user",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"connectUserId = jsonData.connectUserId\r",
											"userEmail = encodeURIComponent(jsonData.userEmail)\r",
											"firstName = jsonData.firstName\r",
											"lastName = jsonData.lastName\r",
											"pm.collectionVariables.set(\"connectUserId\", connectUserId);\r",
											"pm.collectionVariables.set(\"userEmail\", userEmail);\r",
											"pm.collectionVariables.set(\"firstName\", firstName);\r",
											"pm.collectionVariables.set(\"lastName\", lastName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"userEmail\": \"odpuserta+{{randomDataGenerator}}@gmail.com\",\r\n    \"firstName\": \"FN{{randomDataGenerator}}\",\r\n    \"lastName\": \"LN{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"languageCode\": \"{{LANGUAGE_CODE}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create company group on AO",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"idCompanyGroup = jsonData.idCompanyGroup;\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"nameCompanyGroup = jsonData.name\r",
											"pm.collectionVariables.set(\"idCompanyGroup\", idCompanyGroup);\r",
											"pm.collectionVariables.set(\"nameCompanyGroup\", nameCompanyGroup);\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey)\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign client company to CG on AO",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create company group 2 on AO",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"idCompanyGroup = jsonData.idCompanyGroup;\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"nameCompanyGroup = jsonData.name\r",
											"pm.collectionVariables.set(\"idCompanyGroup2\", idCompanyGroup);\r",
											"pm.collectionVariables.set(\"nameCompanyGroup2\", nameCompanyGroup);\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey2\", companyGroupInvariantKey)\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}_2\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign client company to CG 2 on AO",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey2}}/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey2}}",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group with role to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE2_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company group 2 with role 2 to user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"roleInvariantKey\":\"{{ROLE_INVARIANT_KEY}}\",\r\n        \"connectUserId\":\"{{connectUserId}}\",\r\n        \"companyGroupInvariantKey\":\"{{companyGroupInvariantKey2}}\",\r\n        \"toGrant\":true\r\n    }\r\n]"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/serviceAccess/users",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"serviceAccess",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response contains both company groups\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupInvariantKey2'));\r",
											"    pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupInvariantKey'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/companyGroups?sort=name,ASC",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"companyGroups"
									],
									"query": [
										{
											"key": "sort",
											"value": "name,ASC"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate service for client company on client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Activate service for company returns status 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE2_INVARIANT_KEY}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/services/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"services",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company deactivated service",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"Response contains only 2nd company group\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupInvariantKey2'));\r",
											"    pm.expect(pm.response.text()).to.include(pm.collectionVariables.get('companyGroupInvariantKey'));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/companyGroups?sort=name,ASC",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"companyGroups"
									],
									"query": [
										{
											"key": "sort",
											"value": "name,ASC"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company group 1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company group 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey2}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey2}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete user",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(202);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/users/{{connectUserId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"users",
										"{{connectUserId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Deactivate client company with company group role assigned on AO",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT_15SEC')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Create new company group on AO",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"idCompanyGroup = jsonData.idCompanyGroup;\r",
											"companyGroupInvariantKey = jsonData.companyGroupInvariantKey;\r",
											"nameCompanyGroup = jsonData.name\r",
											"pm.collectionVariables.set(\"idCompanyGroup\", idCompanyGroup);\r",
											"pm.collectionVariables.set(\"nameCompanyGroup\", nameCompanyGroup);\r",
											"pm.collectionVariables.set(\"companyGroupInvariantKey\", companyGroupInvariantKey)\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign company to CG",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companyGroups/{{companyGroupInvariantKey}}/companies/{{cloneClientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companyGroups",
										"{{companyGroupInvariantKey}}",
										"companies",
										"{{cloneClientCompanyTenantId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('companyGroupInvariantKey');\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.be.eq(1);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/deactivate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get company group members for company after company is deactivated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Response matches the strings: idCompanyGroup, name.\", function () {\r",
											"    pm.expect(pm.response.json().totalNumberOfRecords).to.be.eq(0);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{cloneClientCompanyTenantId}}/companyGroups",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{cloneClientCompanyTenantId}}",
										"companyGroups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Terminate company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/terminate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"terminate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Company outsourced customer name",
					"item": [
						{
							"name": "Create new company on AO client customer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody);\r",
											"var companyTenantId = jsonData.tenantId;\r",
											"pm.collectionVariables.set(\"clientCompanyTenantId\", companyTenantId);\r",
											"var companyName = jsonData.name;\r",
											"pm.collectionVariables.set(\"clientCompanyName\", companyName);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(false);\r",
											"});\r",
											"\r",
											"setTimeout(function () { }, [pm.environment.get('WAIT_TIMEOUT')]);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"address2\": \"test_address2\",\r\n    \"city\": \"test_city\",\r\n    \"telephone\": \"{{randomDataGenerator}}\",\r\n    \"description\": \"test_description\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get AO customer client companies after new client company is added by company name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"var cloneClientCompanyTenantId = jsonData.content[0].tenantId;\r",
											"pm.collectionVariables.set(\"cloneClientCompanyTenantId\", cloneClientCompanyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Body matches string\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('content');\r",
											"    pm.expect(pm.response.text()).to.include('totalNumberOfRecords');\r",
											"});\r",
											"\r",
											"//3. The requested size value is 1\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content;\r",
											"    var count = jsonData.length;\r",
											"    pm.expect(count).to.be.eq(1);\r",
											"});\r",
											"\r",
											"//4. Company name and tenant are correct\r",
											"pm.test(\"The response body contains the requested number of records\", function () {\r",
											"    var jsonData = pm.response.json().content[0];\r",
											"    var companyName = jsonData.name;\r",
											"    pm.expect(companyName).to.be.eq(pm.collectionVariables.get(\"clientCompanyName\"));\r",
											"    var companyTenantId = jsonData.tenantId;\r",
											"    pm.expect(companyTenantId).not.to.be.eq(pm.collectionVariables.get(\"clientCompanyTenantId\"));\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/customers/clientCompanies?size=30&filter=name,like,{{clientCompanyName}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"customers",
										"clientCompanies"
									],
									"query": [
										{
											"key": "page",
											"value": "",
											"description": "Default value : 0",
											"disabled": true
										},
										{
											"key": "size",
											"value": "30",
											"description": "Default value: 20, Maximum value: 1000"
										},
										{
											"key": "sort",
											"value": "",
											"description": "Default value : asc. Sorting criteria in the format: property(,asc|desc)",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "",
											"disabled": true
										},
										{
											"key": "filter",
											"value": "name,like,{{clientCompanyName}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get outsourced customer name from client customer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"Customer name is in response\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    pm.expect(jsonData[0]).to.be.eq(pm.environment.get('NAME_FOR_AO_CUSTOMER'));\r",
											"    pm.expect(jsonData.length).to.be.eq(1);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}/aoCustomerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}",
										"aoCustomerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get outsourced customer name from company where user is CompanyAdministrator",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"Customer name is in response\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    pm.expect(jsonData.length).to.be.eq(0);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForCompanyAdminUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{COMPANY_TENANT_ID}}/aoCustomerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{COMPANY_TENANT_ID}}",
										"aoCustomerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get outsourced customer name from existent company from distributor administrator",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"Customer name is in response\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    pm.expect(jsonData[0]).to.be.eq(pm.environment.get('NAME_FOR_AO_CUSTOMER'));\r",
											"    pm.expect(jsonData.length).to.be.eq(1);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{TENANT_FOR_AO_CLIENT_CUSTOMER}}/companies/{{TENANT_FOR_AO_CLIENT_COMPANY}}/aoCustomerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{TENANT_FOR_AO_CLIENT_CUSTOMER}}",
										"companies",
										"{{TENANT_FOR_AO_CLIENT_COMPANY}}",
										"aoCustomerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get outsourced customer name for created company from distributor administrator",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 202.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"\r",
											"//2.\r",
											"pm.test(\"Customer name is in response\", function () {\r",
											"    jsonData = JSON.parse(responseBody);\r",
											"    pm.expect(jsonData[0]).to.be.eq(pm.environment.get('NAME_FOR_AO_CUSTOMER'));\r",
											"    pm.expect(jsonData.length).to.be.eq(1);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{distributorAccessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{BASE_URL}}/v1/distributors/customers/{{TENANT_FOR_AO_CLIENT_CUSTOMER}}/companies/{{clientCompanyTenantId}}/aoCustomerName",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"distributors",
										"customers",
										"{{TENANT_FOR_AO_CLIENT_CUSTOMER}}",
										"companies",
										"{{clientCompanyTenantId}}",
										"aoCustomerName"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUserAOClientCustomer}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{clientCompanyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{clientCompanyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Do not activate service with DoNotActivateForDemoCompany on demo companies",
					"item": [
						{
							"name": "Create demo company",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// get a random value\r",
											"const RandomDataGenerator = Date.now()\r",
											"pm.collectionVariables.set(\"randomDataGenerator\", RandomDataGenerator);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"jsonData = JSON.parse(responseBody)\r",
											"companyTenantId = jsonData.tenantId\r",
											"pm.collectionVariables.set(\"companyTenantId\", companyTenantId);\r",
											"\r",
											"//1.\r",
											"pm.test(\"Status code is 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"A new company with tenant: \" + companyTenantId + \" was created.\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"tenantId\");\r",
											"});\r",
											"\r",
											"//3.\r",
											"pm.test(\"The response has all properties\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('name');\r",
											"    pm.expect(pm.response.text()).to.include('tenantId');\r",
											"    pm.expect(pm.response.text()).to.include('countryCode');\r",
											"    pm.expect(pm.response.text()).to.include('organizationNumber');\r",
											"    pm.expect(pm.response.text()).to.include('parentTenantId');\r",
											"});\r",
											"\r",
											"//4.\r",
											"pm.test(\"InformUsersAboutRoleAssignmentUpdates is set to true by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('informUsersAboutRoleAssignmentUpdates');\r",
											"    pm.expect(pm.response.json().informUsersAboutRoleAssignmentUpdates).to.eql(true);\r",
											"});\r",
											"\r",
											"//5.\r",
											"pm.test(\"DemoCompany is set to false by default\", function () {\r",
											"    pm.expect(pm.response.text()).to.include('demoCompany');\r",
											"    pm.expect(pm.response.json().demoCompany).to.eql(true);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"AccessMngmtAPIPostman_{{randomDataGenerator}}\",\r\n    \"countryCode\": \"{{COUNTRY_CODE}}\",\r\n    \"organizationNumber\": \"{{randomDataGenerator}}\",\r\n    \"postalCode\": \"1234\",\r\n    \"address1\": \"test_address1\",\r\n    \"city\": \"test_city\",\r\n    \"demoCompany\": true\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activate service for company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"//2.\r",
											"pm.test(\"Check error message\", function(){\r",
											"   var content = pm.response.json();\r",
											"   pm.expect(content.code).to.be.eq('ERROR_ACTIVATING_COMPANY_SERVICE_FOR_DEMO_COMPANY');\r",
											"   var errorMessage = 'Service ' + pm.environment.get('SERVICE_WITH_DO_NOT_ACTIVATE_FOR_DEMO_COMPANIES') + ' can not be activated because there is a restriction for demo company.';\r",
											"   pm.expect(content.message.toLowerCase).to.eq(errorMessage.toLowerCase);\r",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"serviceInvariantKey\":\"{{SERVICE_WITH_DO_NOT_ACTIVATE_FOR_DEMO_COMPANIES}}\"\r\n}"
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}/services/activate",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}",
										"services",
										"activate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"//1.\r",
											"pm.test(\"Status code is 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessTokenForUser}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{BASE_URL}}/v1/companies/{{companyTenantId}}",
									"host": [
										"{{BASE_URL}}"
									],
									"path": [
										"v1",
										"companies",
										"{{companyTenantId}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"auth": {
		"type": "oauth2",
		"oauth2": [
			{
				"key": "tokenType",
				"value": "Bearer",
				"type": "string"
			},
			{
				"key": "accessToken",
				"value": "{{accessToken}}",
				"type": "string"
			},
			{
				"key": "accessTokenUrl",
				"value": "{{VISMA_CONNECT_URL}}{{TOKEN_PATH}}",
				"type": "string"
			},
			{
				"key": "scope",
				"value": "{{SCOPE}}",
				"type": "string"
			},
			{
				"key": "clientSecret",
				"value": "{{CLIENT_SECRET}}",
				"type": "string"
			},
			{
				"key": "clientId",
				"value": "{{CLIENT_ID}}",
				"type": "string"
			},
			{
				"key": "client_authentication",
				"value": "body",
				"type": "string"
			},
			{
				"key": "grant_type",
				"value": "client_credentials",
				"type": "string"
			},
			{
				"key": "tokenName",
				"value": "OAuth 2.0 Access Token",
				"type": "string"
			},
			{
				"key": "addTokenTo",
				"value": "header",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "accessTokenForCompanyCreation",
			"value": ""
		},
		{
			"key": "accessToken",
			"value": ""
		},
		{
			"key": "accessTokenForCompanyCreationExpiry",
			"value": ""
		},
		{
			"key": "accessTokenExpiry",
			"value": "",
			"type": "string"
		},
		{
			"key": "randomDataGenerator",
			"value": ""
		},
		{
			"key": "connectUserId1",
			"value": ""
		},
		{
			"key": "userEmail1",
			"value": ""
		},
		{
			"key": "connectUserId2",
			"value": ""
		},
		{
			"key": "userEmail2",
			"value": ""
		},
		{
			"key": "customerTenantId",
			"value": ""
		},
		{
			"key": "connectUserId",
			"value": ""
		},
		{
			"key": "userEmail",
			"value": ""
		},
		{
			"key": "createdDistributorExternalId",
			"value": ""
		},
		{
			"key": "externalCustomerId",
			"value": ""
		},
		{
			"key": "totalNumberOfCustomerUsers",
			"value": ""
		},
		{
			"key": "accessTokenForDistributorCreation",
			"value": ""
		},
		{
			"key": "accessTokenForDistributorCreationExpiry",
			"value": ""
		},
		{
			"key": "createdDistributorTenantId",
			"value": ""
		},
		{
			"key": "pageRandomDataGenerator",
			"value": ""
		},
		{
			"key": "totalNumberOfCustomerCompanies",
			"value": ""
		},
		{
			"key": "companyTenantId",
			"value": ""
		},
		{
			"key": "companyTenantId1",
			"value": ""
		},
		{
			"key": "companyTenantId2",
			"value": ""
		},
		{
			"key": "companyName",
			"value": ""
		},
		{
			"key": "organizationNumber",
			"value": ""
		},
		{
			"key": "accessTokenForCustomerCreation",
			"value": ""
		},
		{
			"key": "accessTokenForCustomerCreationExpiry",
			"value": ""
		},
		{
			"key": "userName",
			"value": ""
		},
		{
			"key": "accessTokenForUser",
			"value": "",
			"type": "string"
		},
		{
			"key": "codeChallange",
			"value": "",
			"type": "string"
		},
		{
			"key": "codeVerifier",
			"value": "",
			"type": "string"
		},
		{
			"key": "authorizationCode",
			"value": "",
			"type": "string"
		},
		{
			"key": "requestVerificationToken",
			"value": ""
		},
		{
			"key": "accessTokenForUpdatingCustomer",
			"value": ""
		},
		{
			"key": "totalNumberOfRolesForUserAtCustomerLevel",
			"value": ""
		},
		{
			"key": "totalNumberOfRolesForUserAtCompanyLevel",
			"value": ""
		},
		{
			"key": "totalNumberOfRolesAtCustomerLevel",
			"value": ""
		},
		{
			"key": "firstName",
			"value": ""
		},
		{
			"key": "lastName",
			"value": ""
		},
		{
			"key": "totalNumberOfRolesAtCompanyLevel",
			"value": ""
		},
		{
			"key": "accessTokenForDifferentCustomerExipry",
			"value": ""
		},
		{
			"key": "userGroupName",
			"value": ""
		},
		{
			"key": "idUserGroup",
			"value": ""
		},
		{
			"key": "userName2",
			"value": ""
		},
		{
			"key": "userName1",
			"value": ""
		},
		{
			"key": "deleteUserJobId",
			"value": ""
		},
		{
			"key": "maxNumberOfTries",
			"value": "5",
			"type": "string"
		},
		{
			"key": "sleepBetweenTries",
			"value": "1000",
			"type": "string"
		},
		{
			"key": "totalNumberOfCustomerUserGroups",
			"value": ""
		},
		{
			"key": "userGroupName1",
			"value": ""
		},
		{
			"key": "idUserGroup1",
			"value": ""
		},
		{
			"key": "userGroupName2",
			"value": ""
		},
		{
			"key": "idUserGroup2",
			"value": ""
		},
		{
			"key": "usedCompanies",
			"value": ""
		},
		{
			"key": "userGroupNameEncoded",
			"value": ""
		},
		{
			"key": "antiForgeryCookie",
			"value": ""
		},
		{
			"key": "idCompanyGroup",
			"value": ""
		},
		{
			"key": "randomDataGenerator2",
			"value": ""
		},
		{
			"key": "userGroupNameEncoded2",
			"value": ""
		},
		{
			"key": "nameCompanyGroup",
			"value": ""
		},
		{
			"key": "updatedNameCompanyGroup",
			"value": ""
		},
		{
			"key": "roleGroupInvariantKeyForCompany",
			"value": ""
		},
		{
			"key": "roleGroupInvariantKeyForCustomer",
			"value": ""
		},
		{
			"key": "idCompanyGroup2",
			"value": ""
		},
		{
			"key": "roleGrpouTotalNumberOfRecords",
			"value": ""
		},
		{
			"key": "roleGroupNameForCompany",
			"value": ""
		},
		{
			"key": "roleGroupNameForCustomer",
			"value": ""
		},
		{
			"key": "roleGrpouTotalNumberOfRecordsForCompany",
			"value": ""
		},
		{
			"key": "roleGroupTotalNumberOfRecordsForCompany",
			"value": ""
		},
		{
			"key": "roleGroupTotalNumberOfRecordsForCustomer",
			"value": ""
		},
		{
			"key": "accessTokenForUserForAnotherCustomer",
			"value": ""
		},
		{
			"key": "companyGroupName",
			"value": ""
		},
		{
			"key": "createdCompanyGroup",
			"value": ""
		},
		{
			"key": "companyGroupNameUpdated",
			"value": ""
		},
		{
			"key": "accessTokenForUserForSelfDelete",
			"value": ""
		},
		{
			"key": "idTokenForUser",
			"value": ""
		},
		{
			"key": "defaultRoleGroupInvariantKey",
			"value": ""
		},
		{
			"key": "defaultRoleGroupDefinedOnCustomerInvariantKey",
			"value": ""
		},
		{
			"key": "roleName",
			"value": ""
		},
		{
			"value": ""
		},
		{
			"key": "roleGroupInvariantKeyForCompany1",
			"value": ""
		},
		{
			"key": "roleGroupInvariantKeyForCompany2",
			"value": ""
		},
		{
			"key": "roleGroupInvariantKeyForCompany3",
			"value": ""
		},
		{
			"key": "roleGroupInvariantKeyForCustomer1",
			"value": ""
		},
		{
			"key": "roleGroupInvariantKeyForCustomer2",
			"value": ""
		},
		{
			"key": "roleGroupInvariantKeyForCustomer3",
			"value": ""
		},
		{
			"key": "roleGroupNameForCompany1",
			"value": ""
		},
		{
			"key": "roleGroupNameForCompany2",
			"value": ""
		},
		{
			"key": "roleGroupNameForCompany3",
			"value": ""
		},
		{
			"key": "idCompanyGroupSecond",
			"value": ""
		},
		{
			"key": "roleNameForCompany",
			"value": ""
		},
		{
			"key": "roleNameForCustomer",
			"value": ""
		},
		{
			"key": "xsrfToken",
			"value": ""
		},
		{
			"key": "otherRoleGroupForCompanyInvariantKey",
			"value": ""
		},
		{
			"key": "accessTokenForUserSecondCA",
			"value": ""
		},
		{
			"key": "accessTokenForUserAOcustomer",
			"value": ""
		},
		{
			"key": "idTokenForUserAOcustomer",
			"value": ""
		},
		{
			"key": "authorizationCodeAOCustomer",
			"value": ""
		},
		{
			"key": "accessTokenForUserAOCustomer",
			"value": ""
		},
		{
			"key": "idTokenForUserAOCustomer",
			"value": ""
		},
		{
			"key": "xsrfTokenAOCustomer",
			"value": ""
		},
		{
			"key": "requestVerificationTokenAOCustomer",
			"value": ""
		},
		{
			"key": "codeVerifierAOCustomer",
			"value": ""
		},
		{
			"key": "codeChallangeAOCustomer",
			"value": ""
		},
		{
			"key": "requestVerificationTokenAOClientCustomer",
			"value": ""
		},
		{
			"key": "codeVerifierAOClientCustomer",
			"value": ""
		},
		{
			"key": "codeChallangeAOClientCustomer",
			"value": ""
		},
		{
			"key": "authorizationCodeAOClientCustomer",
			"value": ""
		},
		{
			"key": "xsrfTokenAOClientCustomer",
			"value": ""
		},
		{
			"key": "accessTokenForUserAOClientCustomer",
			"value": ""
		},
		{
			"key": "idTokenForUserAOClientCustomer",
			"value": ""
		},
		{
			"key": "clientCompanyTenantId",
			"value": ""
		},
		{
			"key": "clientCompanyName",
			"value": ""
		},
		{
			"key": "connectUserId3",
			"value": ""
		},
		{
			"key": "userEmail3",
			"value": ""
		},
		{
			"key": "clientCompanyTenantId1",
			"value": ""
		},
		{
			"key": "clientCompanyName1",
			"value": ""
		},
		{
			"key": "clientCompanyTenantId2",
			"value": ""
		},
		{
			"key": "clientCompanyName2",
			"value": ""
		},
		{
			"key": "cloneClientCompanyTenantId",
			"value": ""
		},
		{
			"key": "cloneClientCompanyTenantId1",
			"value": ""
		},
		{
			"key": "cloneClientCompanyTenantId2",
			"value": ""
		},
		{
			"key": "userName1Encoded",
			"value": ""
		},
		{
			"key": "userName2Encoded",
			"value": ""
		},
		{
			"key": "userName3",
			"value": ""
		},
		{
			"key": "userName3Encoded",
			"value": ""
		},
		{
			"key": "userEmail2encoded",
			"value": ""
		},
		{
			"key": "companyNameEncoded",
			"value": ""
		},
		{
			"key": "userGroupInvariantKey",
			"value": ""
		},
		{
			"key": "accessTokenForCompanyAdminUser",
			"value": ""
		},
		{
			"key": "idTokenForCompanyAdminUser",
			"value": ""
		},
		{
			"key": "companyGroupInvariantKey",
			"value": ""
		},
		{
			"key": "companyGroupInvariantKey2",
			"value": ""
		},
		{
			"key": "companyGroupInvariantkey",
			"value": ""
		},
		{
			"key": "jobId",
			"value": ""
		},
		{
			"key": "whenEdited",
			"value": ""
		},
		{
			"key": "distributorAccessTokenForUser",
			"value": ""
		},
		{
			"key": "nameCompanyGroup2",
			"value": ""
		},
		{
			"key": "NAME_FOR_AO_CUSTOMER",
			"value": "ODPAutoTests_AOCustomer",
			"type": "string"
		},
		{
			"key": "roleGroupName",
			"value": ""
		}
	]
}